<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="destination_destination_search_view" model="ir.ui.view">
        <field name="name">destination.destination.search.view</field>
        <field name="model">destination.destination</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
                <field name="code" />
                <filter name="filter_archive" string="Archived" domain="[['active','=',False]]" />
            </search>
        </field>
    </record>


    <record id="dest_list_view" model="ir.ui.view">
        <field name="name">destination.list.view</field>
        <field name="model">destination.destination</field>
        <field name="arch" type="xml">
            <tree>
                <field name="sequence" optional="show" widget="handle" />
                <field name="name" />
                <field name="code" />
                <field name="partner_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                <field name="product_count" optional="show" groups="destinations.destination_super_admin_group,destinations.destination_admin_group,destinations.destination_accounting_group,destinations.destination_sales_group" />
                <field name="membership_count" optional="show" groups="destinations.destination_super_admin_group,destinations.destination_admin_group,destinations.destination_accounting_group,destinations.destination_sales_group" />
            </tree>
        </field>
    </record>


    <record id="destination_destination_kanban_view" model="ir.ui.view">
        <field name="name">destination.destination.kanban.view</field>
        <field name="model">destination.destination</field>
        <field name="arch" type="xml">
            <kanban  records_draggable="0"  group_create="0" group_delete="0" group_edit="0" archivable="0" quick_create="0" class="o_res_partner_kanban" sample="1">
                <field name="id" />
                <field name="product_count" />
                <field name="active_membership_count" />
                <field name="active_member_count" />
                <field name="checkedin_guest_count" />
                <field name="checkedin_member_count" />
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_res_partner_kanban">
                            <div class="o_kanban_image_fill_left o_kanban_image_full" t-attf-style="background-image: url(#{kanban_image('destination.destination', 'image', record.id.raw_value)})" role="img" />
                            <div class="oe_kanban_details d-flex flex-column">
                                <strong class="o_kanban_record_title oe_partner_heading">
                                    <field name="name" on_change="1" modifiers="{&quot;readonly&quot;: true}" />
                                </strong>
                                <field name="code" />

                                <div class="o_row">
                                    <span class="oe_kanban_partner_links">
                                        <span class="badge badge-pill" t-if="record.product_count.value&gt;0">
                                            <i class="fa fa-folder" aria-label="Products" role="img" title="Products" />
                                            <t t-esc="record.product_count.value" />
                                        </span>

                                        <span class="badge badge-pill" t-if="record.active_membership_count.value&gt;0">
                                            <i class="fa fa-key" aria-label="Rentals" role="img" title="Active Rentals" />
                                            <t t-esc="record.active_membership_count.value" style="color:green" />
                                        </span>

                                        <span class="badge badge-pill" t-if="record.active_member_count.value&gt;0">
                                            <i class="fa fa-id-badge" aria-label="Members" role="img" title="Active Members" />
                                            <t t-esc="record.active_member_count.value" style="color:green" />
                                        </span>

                                        <span class="badge badge-pill" t-if="record.checkedin_guest_count.value&gt;0">
                                            <i class="fa fa-ticket" aria-label="Guests In" role="img" title="Guests In" />
                                            <t t-esc="record.checkedin_guest_count.value" style="color:green" />
                                        </span>

                                        <span class="badge badge-pill" t-if="record.checkedin_member_count.value&gt;0">
                                            <i class="fa fa-sign-in" aria-label="Members In" role="img" title="Members In" />
                                            <t t-esc="record.checkedin_member_count.value" style="color:green" />
                                        </span>
                                    </span>

                                    <field name="activity_ids" widget="kanban_activity" on_change="1" modifiers="{}" />
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>


    <record id="dest_form_view" model="ir.ui.view">
        <field name="name">destination.form.view</field>
        <field name="model">destination.destination</field>
        <field name="arch" type="xml">
            <form duplicate="0">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_product" type="object" class="oe_stat_button" icon="fa-folder">
                            <field name="product_count" widget="statinfo" string="Products" modifiers="{'readonly': true}" />
                        </button>
                        <button name="action_view_pricerule" type="object" class="oe_stat_button" icon="fa-th-list">
                            <field name="pricerule_count" widget="statinfo" string="Price Rules" modifiers="{'readonly': true}" />
                        </button>
                        <button name="action_view_membership" type="object" class="oe_stat_button" icon="fa-key">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="active_membership_count" style="color:green" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Rentals</span>
                            </div>
                        </button>
                        <button class="oe_stat_button" icon="fa-id-badge" type="object" name="action_view_member">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="active_member_count" style="color:green" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Members</span>
                            </div>
                        </button>
                        <button name="action_view_member_activity" type="object" class="oe_stat_button" icon="fa-sign-in">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="checkedin_member_count" style="color:green" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Members In</span>
                            </div>
                        </button>
                        <button name="action_view_guest" type="object" class="oe_stat_button" icon="fa-ticket">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="checkedin_guest_count" style="color:green" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Guest In</span>
                            </div>
                        </button>

                    </div>
                    <field name="active" invisible="1" />
                    <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}" modifiers="{'invisible': [['active', '=', true]]}" />
                    <field name="image" widget="image" class="oe_avatar" options="{'preview_image': 'image'}" modifiers="{}" />
                    <field name="company_image" widget="image" class="oe_avatar" options="{'preview_image': 'company_image'}" modifiers="{}" />
                    <div class="oe_title">
                        <label for="name" string="Entity Name" />
                        <h1>
                            <div class="d-flex">
                                <field class="text-break" name="name" placeholder="e.g. Oia Beach" modifiers="{'required': true}" />
                            </div>
                        </h1>
                    </div>
                    <div>
                        <group>
                            <field name="code" />
                            <field name="company_id" invisible="1" />
                            <field name="partner_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                        </group>
                    </div>
                    <notebook>
                        <page name="manager_ids" string="Managers" groups="destinations.destination_admin_group">
                            <field name="manager_ids" options="{'no_open':true,'no_create':true}">
                                <tree editable="bottom">
                                    <field name="user_id" />
                                    <field name="manager_role" />
                                </tree>
                            </field>
                        </page>

                        <page name="user_ids" string="Users" groups="destinations.destination_admin_group">
                            <field name="user_ids" options="{'no_open':true,'no_create':true}">
                                <tree editable="bottom">
                                    <field name="user_id" />
                                    <field name="cat_user_ids" widget="many2many_tags" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                                </tree>
                            </field>
                        </page>

                        <page name="accounting" string="Accounting" groups="destinations.destination_admin_group,destinations.destination_accounting_group">
                            <group>
                                <group>
                                    <field name="rental_sales_journal_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                                    <field name="rental_deposit_journal_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                                    <field name="rental_payment_method_ids" widget="many2many_tags" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />

                                    <field name="rental_default_payment_method_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />

                                    <field name="rental_partner_default_category_ids" widget="many2many_tags" />
                                </group>
                                <group>
                                    <field name="access_sales_journal_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                                    <field name="access_payment_method_ids" widget="many2many_tags" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />

                                    <field name="access_default_payment_method_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />

                                    <field name="access_partner_default_category_ids" widget="many2many_tags" />
                                </group>
                                <group string="Required Fields">
                                    <field name="partner_id_required"/>
                                    <field name="partner_gender_required"/>
                                    <field name="partner_email_required"/>
                                    <field name="partner_phone_required"/>
                                    <field name="partner_mobile_required"/>
                                </group>
                                <group string="Manager(s) Approval Rules">
                                    
                                    <field name="approval_required_dest"/>
                                    <field name="approval_required_accommodation"/>
                                    <field name="approval_required_membership"/>
                                    <field name="approval_required_dest_member"/>
                                    <field name="approval_required_dest_accommodation_member"/>
                                    <field name="approval_required_dest_membership_member"/>
                                    
                                </group>
                            </group>

                        </page>
                    </notebook>
                </sheet>

                <div class="oe_chatter">
                    <field name="message_follower_ids" modifiers="{}" />
                    <field name="activity_ids" modifiers="{}" />
                    <field name="message_ids" modifiers="{}" />
                </div>

            </form>
        </field>
    </record>
    <record id="dest_product_template_inherited_view" model="ir.ui.view">
        <field name="name">product.template.product.form.dest.inherited</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view"></field>
        <field name="mode">extension</field>
        <field name="groups_id" eval="[
                                            (4, ref('destinations.destination_admin_group')),
                                            (4, ref('destinations.destination_accounting_group')),
                                            (4, ref('destinations.destination_sales_group')),
                                            (4, ref('destinations.destination_guest_process_group')),
                                            (4, ref('destinations.destination_guest_checking_group')),
                                            (4, ref('destinations.destination_guest_registration_group'))
                                            ]" />
        <field name="arch" type="xml">
            <data>
                <xpath expr="//form/sheet[@name='product_form']/div[@name='button_box']/button[1]" position="before">
                    <button class="oe_stat_button" icon="fa-home" type="object" name="action_view_dest" attrs="{'invisible': ['|',['dest_ok','=',False],['dest_id','=',False]]}">
                        <field widget="statinfo" name="dest_id" readonly="1" />
                    </button>
                    <button name="action_view_pricerule" type="object" class="oe_stat_button" icon="fa-th-list" attrs="{'invisible': ['|',['dest_ok','=',False],['dest_id','=',False]]}">
                        <field name="pricerule_count" widget="statinfo" string="Price Rules" modifiers="{'readonly': true}" />
                    </button>
                    <button name="action_view_membership" type="object" class="oe_stat_button" icon="fa-key" attrs="{'invisible': ['|','|',['dest_ok','=',False],['dest_id','=',False],['dest_product_group','=','access']]}">
                        <field name="membership_count" widget="statinfo" string="Rentals" modifiers="{'readonly': true}" />
                    </button>
                </xpath>
                <xpath expr="//form/sheet[@name='product_form']/div[@name='options']/span[2]" position="after">
                    <span class="d-inline-block">
                        <field name="dest_ok" attrs="{'readonly':[['lock_dest_id','=',True]]}" />
                        <label for="dest_ok" />
                    </span>
                </xpath>
                <xpath expr="//form/sheet[@name='product_form']/notebook[1]" position="inside">
                    <page string="Destination" name="destination_notebook" attrs="{'invisible': [['dest_ok','=',False]]}">

                        <group name="group1">
                            <group name="product_details" string="Product Details">
                                <field name="dest_id" widget="selection" attrs="{'required': [['dest_ok','=',True]], 'readonly':[['lock_dest_id','=',True]]}" />
                                <field name="lock_dest_id" invisible="1" />
                                <field name="lock_dest_ok" invisible="1" />
                                <field name="dest_product_code" string="Product Code" attrs="{'required': [['dest_ok','=',True]]}" />
                                <field name="dest_quantity" attrs="{'invisible' : [['dest_product_group','in',['access','others']]]}"/>
                                <field name="dest_product_group" string="Product Group" widget="radio" options="{'horizontal':false}" attrs="{'required': [['dest_ok','=',True]]}" />
                                <field name="dest_custom_price" string="Custom Price" widget="radio" options="{'horizontal':false}" attrs="{'required': [['dest_ok','=',True]]}" />
                                <field name="approval_required_product" attrs="{'invisible' : [['dest_product_group','in',['access','others']]]}"/>
                                <field name="approval_required_product_member" attrs="{'invisible' : [['dest_product_group','in',['access','others']]]}"/>
                            </group>
                            <group name="timing" string="Accessibility" attrs="{'invisible' : [['dest_product_group','=','others']]}">
                                <group>
                                    <field name="dest_checkin_time" widget="float_time" attrs="{'invisible' : [['dest_product_group','in',['access','others']]]}" />
                                    <field name="dest_checkout_time" widget="float_time" attrs="{'invisible' : [['dest_product_group','in',['access','others']]]}" />
                                    <field name="dest_access_start_time" widget="float_time" attrs="{'invisible':['|',('dest_product_group','!=','access'),'&amp;',('dest_product_group','=','access'),('dest_custom_price','=','weekday_rate')]}" />
                                    <field name="dest_access_duration" widget="float_time" attrs="{'invisible':['|',('dest_product_group','!=','access'),'&amp;',('dest_product_group','=','access'),('dest_custom_price','=','weekday_rate')]}" />
                                    <field name="dest_guest_gender_male" attrs="{'invisible': [['dest_product_group','!=','access']]}" />
                                    <!--<field name="dest_guest_single_male" attrs="{'invisible': [['dest_product_group','!=','access']]}" />-->
                                    <field name="dest_guest_gender_female" attrs="{'invisible': [['dest_product_group','!=','access']]}" />
                                    <field name="access_product_member" attrs="{'invisible': [['dest_product_group','!=','access']]}" />
                                    <field name="access_product_guest" attrs="{'invisible': [['dest_product_group','!=','access']]}" />
                                    <field name="access_product_code_required" attrs="{'invisible': [['dest_product_group','!=','access']]}" />
                                </group>
                                <group attrs="{'invisible': ['&amp;',['dest_product_group','!=','accommodation'],['dest_product_group','!=','membership']], 'required': ['|',['dest_product_group','=','accommodation'],['dest_product_group','=','membership']]}">
                                    <field name="dest_member_access_sunday" />
                                    <field name="dest_member_access_monday" />
                                    <field name="dest_member_access_tuesday" />
                                    <field name="dest_member_access_wednesday" />
                                    <field name="dest_member_access_thursday" />
                                    <field name="dest_member_access_friday" />
                                    <field name="dest_member_access_saturday" />
                                </group>
                            </group>
                            <group name="invoicing_sec" string="Quotation &amp; Invoice" attrs="{'invisible': [['dest_product_group','in',['access','others']]]}">
                                <field name="dest_invoice_policy" />
                                <field name="payment_term_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />

                                <label for="dest_product_security_deposit" string="Security Deposit" />
                                <div>
                                    <field name="dest_product_security_deposit" class="oe_inline" style="width:160px !important" />
                                    <field name="dest_product_security_deposit_amount" class="oe_inline ml-2 mr-2" style="width:100px !important" attrs="{'required': [['dest_product_security_deposit','=','fixed']], 'invisible' : [['dest_product_security_deposit','!=','fixed']]}" />
                                    <field name="dest_product_security_deposit_percent" class="oe_inline ml-2 mr-2" style="width:100px !important" attrs="{'required': [['dest_product_security_deposit','=','percent']], 'invisible' : [['dest_product_security_deposit','!=','percent']]}" />
                                </div>
                                <field name="dest_product_security_deposit_product" attrs="{'required': [['dest_product_security_deposit','!=',False]], 'invisible' : [['dest_product_security_deposit','=',False]]}" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />

                            </group>

                            <group string="Tenants, Members &amp; Guests" attrs="{'invisible': ['&amp;',['dest_product_group','!=','accommodation'],['dest_product_group','!=','membership']], 'required': ['|',['dest_product_group','=','accommodation'],['dest_product_group','=','membership']]}">

                                <label for="dest_member_count" string="Max. Capacity" />
                                <div>
                                    <field name="dest_member_count" class="oe_inline" style="width:30px !important" />
                                    <span class="ml-2 mr-2 oe_inline"> Male </span>
                                    <field name="dest_member_male_count" class="oe_inline" style="width:30px !important" />
                                    <span class="ml-2 mr-2 oe_inline"> Female </span>
                                    <field name="dest_member_female_count" class="oe_inline" style="width:30px !important" />
                                </div>
                                <!--
                                    <label for="dest_daily_guest_count" string="Max. Guests" />
                                <div>
                                    <field name="dest_daily_guest_count" class="oe_inline" style="width:30px !important" />
                                    <span class="ml-2 mr-2 oe_inline"> Male </span>
                                    <field name="dest_daily_guest_male_count" class="oe_inline" style="width:30px !important" />
                                    <span class="ml-2 mr-2 oe_inline"> Single Male </span>
                                    <field name="dest_daily_guest_male_single_count" class="oe_inline" style="width:30px !important" />
                                    <span class="ml-2 mr-2 oe_inline"> Female </span>
                                    <field name="dest_daily_guest_female_count" class="oe_inline" style="width:30px !important" />
                                </div>
                                <label for="dest_month_free_guest_count" string="Max. Free Guests" />
                                <div>
                                    <field name="dest_month_free_guest_count" class="oe_inline" style="width:30px !important" />
                                </div>
                                -->

                            </group>


                            <group string="Pricing" name="weekday_pricing" attrs="{'invisible': ['|',['dest_custom_price','!=','weekday_rate'],['dest_product_group','=','access']]}">
                                <field name="dest_price_sunday" string="Price Sunday" attrs="{'required': [['dest_custom_price','=','weekday_rate']]}" />
                                <field name="dest_price_monday" string="Price Monday" attrs="{'required': [['dest_custom_price','=','weekday_rate']]}" />
                                <field name="dest_price_tuesday" string="Price Tuesday" attrs="{'required': [['dest_custom_price','=','weekday_rate']]}" />
                                <field name="dest_price_wednesday" string="Price Wednesday" attrs="{'required': [['dest_custom_price','=','weekday_rate']]}" />
                                <field name="dest_price_thursday" string="Price Thursday" attrs="{'required': [['dest_custom_price','=','weekday_rate']]}" />
                                <field name="dest_price_friday" string="Price Friday" attrs="{'required': [['dest_custom_price','=','weekday_rate']]}" />
                                <field name="dest_price_saturday" string="Price Saturday" attrs="{'required': [['dest_custom_price','=','weekday_rate']]}" />
                            </group>
                        </group>

                        <group string="Pricing" attrs="{'invisible': ['|',['dest_custom_price','!=','daily_rate'],['dest_product_group','=','access']]}">
                            <field name="dest_rental_pricing_ids" widget="section_one2many" string="Pricing" nolabel="1">
                                <tree editable="bottom">
                                    <field name="duration" />
                                    <field name="unit" />
                                    <field name="price" />
                                    <field name="currency_id" invisible="1" />
                                </tree>
                            </field>

                        </group>

                        <group string="Pricing" attrs="{'invisible': ['|',['dest_product_group','!=','access'],'&amp;',['dest_custom_price','!=','weekday_rate'],['dest_product_group','=','access']]}">
                            <group>
                                <field name="dest_access_clone_pricing_ids" options="{'no_open':true,'no_create':true}"/>
                            </group>
                            <group>
                                <button name="clone_access_pricings" string="Clone" type="object" class="oe_highlight oe_edit_only"  />
                            </group>
                            <field name="dest_access_pricing_ids" widget="section_one2many" string="Pricing" nolabel="1" attrs="{'required': ['&amp;',['dest_product_group','=','access'],['dest_custom_price','=','weekday_rate']]}">
                                <tree editable="bottom" decoration-danger="check == True">
                                    <field name="sequence" widget="handle" />
                                    <field name="access_weekday" />
                                    <field name="access_time_start" string="Start" widget="float_time" />
                                    <field name="access_time_end" string="End" widget="float_time" />
                                    <field name="access_duration" string="Duration" widget="float_time" />
                                    <field name="price" />
                                    <field name="duration" widget="float_time" invisible="0" optional="hide" />
                                    <field name="weekday_duration" widget="float_time" invisible="0" optional="hide" />
                                    <field name="check" invisible="0" optional="hide" />


                                </tree>
                            </field>
                        </group>
                        
                        <group string="Access Products" attrs="{'invisible': [['dest_product_group','=','access']]}">
                            <group>
                                <field name="access_products_clone_product_id" options="{'no_open':true,'no_create':true}"/>
                            </group>
                            <group>
                                <button name="clone_access_products" string="Clone" type="object" class="oe_highlight oe_edit_only"  />
                            </group>
                            <field name="access_products_ids" widget="section_one2many" string="Access Products" nolabel="1" >
                                <tree editable="bottom">
                                    <field name="sequence" widget="handle"/>
                                    <field name="product_ids" widget="many2many_tags" />
                                    <field name="period"/>
                                    <field name="cap"/>
                                    <field name="free_guest"/>
                                    <field name="dest_id" invisible="1"/>
                                    


                                </tree>
                            </field>
                        </group>

                    </page>
                    <page string="Product Unavailability" name="destination_availability" attrs="{'invisible': [['dest_ok','=',False]]}">
                        <field name="product_unavailability" widget="section_one2many" string="Product Unavailability" nolabel="1">
                            <tree editable="bottom">
                                <field name="start_date" widget="daterange" options="{'related_end_date': 'end_date'}"/>
                                <field name="end_date" widget="daterange" options="{'related_start_date': 'start_date'}"/>               
                                <field name="reason" />
                            </tree>
                        </field>
                    </page>
                </xpath>
            </data>
        </field>
    </record>
    
    <record id="product_template_location_inherited_view" model="ir.ui.view">
        <field name="name">product.template.product.location.form.inherited</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"></field>
        <field name="mode">extension</field>
        
        <field name="arch" type="xml">
            <data>
                <xpath expr="//field[@name='barcode']" position="after">
                    <field name="location_custom"/>
                </xpath>
            </data>
        </field>
    </record>

    <record id="destination_product_search_view" model="ir.ui.view">
        <field name="name">destination.product.search.view</field>
        <field name="model">product.template</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" string="Product" filter_domain="['|', '|', '|', '|', ('dest_product_code', 'ilike', self), ('default_code', 'ilike', self), ('product_variant_ids.default_code', 'ilike', self),('name', 'ilike', self), ('barcode', 'ilike', self)]"/>
                <field name="categ_id" filter_domain="[('categ_id', 'child_of', raw_value)]"/>
                
                <group name="product_group_by">
                    <filter name="destination" string="Entity" context="{'group_by': 'dest_id'}" />
                    <filter name="categ_id" string="Product Category" context="{'group_by': 'categ_id'}" />
                    <filter name="product_group" string="Product Group" context="{'group_by': 'dest_product_group'}" />
                    <filter name="product_pricing" string="Pricing" context="{'group_by': 'dest_custom_price'}" />
                </group>
                <filter string="Rental" name="accommodation" domain="[('dest_product_group', '=', 'accommodation')]" />
                <filter string="Membership" name="membership" domain="[('dest_product_group', '=', 'membership')]" />
                <filter string="Access" name="access" domain="[('dest_product_group', '=', 'access')]" />
                <filter string="Others" name="others" domain="[('dest_product_group', '=', 'others')]" />
                <separator />
                <filter string="Variable Weekday Rate" name="weekday_rate" domain="[('dest_custom_price', '=', 'weekday_rate')]" />
                <filter string="Variable Daily Rate" name="daily_rate" domain="[('dest_custom_price', '=', 'daily_rate')]" />
                <filter string="Fixed Rate" name="fixed" domain="[('dest_custom_price', '=', 'fixed')]" />
                <separator />
                <filter name="filter_archive" string="Archived" domain="[['active','=',False]]" />
                <searchpanel>
                    <field name="categ_id" enable_counters="1" string="Product Category" />
                    <field name="dest_product_group" enable_counters="1" string="Product Group" />
                    <field name="dest_custom_price" enable_counters="1" string="Pricing" />
                </searchpanel>
            </search>
        </field>
    </record>


    <record id="dest_product_list_view" model="ir.ui.view">
        <field name="name">product.template.product.list.dest.inherited</field>
        <field name="model">product.template</field>
        <field name="groups_id" eval="[
                                            (4, ref('destinations.destination_admin_group')),
                                          (4, ref('destinations.destination_super_admin_group')),
                                            (4, ref('destinations.destination_accounting_group')),
                                            (4, ref('destinations.destination_sales_group')),
                                            (4, ref('destinations.destination_guest_process_group')),
                                            (4, ref('destinations.destination_guest_checking_group')),
                                            (4, ref('destinations.destination_guest_registration_group'))
                                            ]" />
        <field name="arch" type="xml">
            <tree>
                <field name="sequence" optional="show" widget="handle" />
                <field name="name" />
                <field name="dest_product_code" optional="show"/>
                <field name="dest_id" widget="selection"/>
                <field name="categ_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                <field name="list_price" optional="show"/>
                <field name="dest_product_group" optional="hide"/>
                <field name="dest_custom_price" optional="hide" />
            </tree>
        </field>
    </record>


    <record id="destination_membership_search_view" model="ir.ui.view">
        <field name="name">destination.membership.search.view</field>
        <field name="model">destination.membership</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" string="Rental" filter_domain="['|', '|', '|', ('name', 'ilike', self), ('membership_code', 'ilike', self), ('product_id_dest_code', 'ilike', self),('product_id_code', 'ilike', self)]"/>
                <field name="partner_id" />
                <field name="product_id" />
                <field name="members_lines" />
                <group name="memberships_group_by">
                    <filter name="destination" string="Entity" context="{'group_by': 'dest_id'}" />
                    <filter name="state" string="Status" context="{'group_by': 'state'}" />
                    <filter name="user_id" string="Salesperson" context="{'group_by': 'user_id'}" />
                    <filter name="product_id" string="Product" context="{'group_by': 'product_id'}" />
                    <filter name="product_categ_id" string="Product Category" context="{'group_by': 'product_categ_id'}" />
                    <filter name="product_group" string="Product Group" context="{'group_by': 'dest_product_group'}" />
                    <filter name="product_pricing" string="Pricing" context="{'group_by': 'dest_custom_price'}" />
                </group>
                <filter string="My Orders" name="my_orders" domain="[('user_id', '=', uid)]" />
                <separator />
                <filter string="On-going" name="ongoing" domain="[('state', 'not in', [('done','cancel')])]" />
                <filter string="Today" name="my_today" domain="['|',('start_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0))),('end_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59))),('end_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0))),('start_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59)))]" />
                <filter string="Late" name="late" domain="['&amp;',('state','in',['active','hold']),('end_date','&lt;',datetime.datetime.now())]"/>
                <filter string="Expired" name="expired" domain="['&amp;',('state','in',['new','pending']),('date_expiry','&lt;', datetime.datetime.now())]"/>
                <separator />
                <filter name="filter_new" string="Draft" domain="[['state','=','new']]" />
                <filter name="filter_pending" string="Pending" domain="[['state','=','pending']]" />
                <filter name="filter_approved" string="Approved" domain="[['state','=','approved']]" />
                <filter name="filter_confirmed" string="Confirmed" domain="[['state','=','confirmed']]" />
                <separator />
                <filter name="filter_active" string="Active" domain="[['state','=','active']]" />
                <filter name="filter_hold" string="On Hold" domain="[['state','=','hold']]" />
                <filter name="filter_checkedout" string="Checked-Out" domain="[['state','=','checked-out']]" />
                <separator />
                <filter name="filter_done" string="Done" domain="[['state','=','done']]" />
                <filter name="filter_cancel" string="Cancelled" domain="[['state','=','cancel']]" />
                <separator />
                <filter string="Start Date" name="filter_start_date" date="dest_checkin_time" />
                <filter string="End Date" name="filter_end_date" date="dest_checkout_time" />
                <separator />
                <filter name="filter_archive" string="Archived" domain="[['active','=',False]]" />
                <searchpanel>
                    <field name="state" icon="fa-folder" enable_counters="1" />
                    <field name="product_categ_id" enable_counters="1" string="Product Category" />
                    <field name="dest_product_group" enable_counters="1" string="Product Group" />
                    <field name="dest_custom_price" enable_counters="1" string="Pricing" />
                </searchpanel>
            </search>
        </field>
    </record>

    <record id="destination_membership_member_search_view" model="ir.ui.view">
        <field name="name">destination.membership.member.search.view</field>
        <field name="model">destination.membership.member</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
                <field name="member_id_number" />
                <field name="partner_id" filter_domain="['|','|','|',('member_name', 'ilike', self),('member_phone', 'ilike', self),('member_mobile', 'ilike', self),('member_id_number', 'ilike', self)]" />
                <field name="dest_id" />
                <field name="product_id" />
                <field name="name" />
                <field name="membership_id" />
                <group name="members_group_by">
                    <filter name="destination" string="Entity" context="{'group_by': 'dest_id'}" />
                    <filter name="memberships" string="Rental/Membership" context="{'group_by': 'membership_id'}" />
                    <filter name="state" string="Status" context="{'group_by': 'state'}" />
                    <separator />
                    <filter name="membership_type" string="Member Type" context="{'group_by': 'membership_type'}" />
                    <filter name="partnergender" string="Gender" context="{'group_by': 'partnergender'}" />
                    <separator />
                    <filter name="product_id" string="Product" context="{'group_by': 'product_id'}" />
                    <filter name="product_categ_id" string="Product Category" context="{'group_by': 'product_categ_id'}" />
                    <filter name="product_group" string="Product Group" context="{'group_by': 'dest_product_group'}" />
                    <filter name="product_pricing" string="Pricing" context="{'group_by': 'dest_custom_price'}" />
                </group>

                <filter name="filter_active" string="Active" domain="[['state','=','active']]" />
                <filter name="filter_inactive" string="Inactive" domain="[['state','=','inactive']]" />
                <filter name="filter_pending" string="Pending" domain="[['state','=','pending']]" />
                <separator />
                <filter name="inprocess" string="In-Process" domain="[['member_access_status','=','inprocess']]" />
                <filter name="checkedin" string="Checked-In" domain="[['member_access_status','=','checked-in']]" />
                

                <searchpanel>
                    <field name="state" string="Status" icon="fa-folder" enable_counters="1" />
                    <field name="membership_type" enable_counters="1" string="Type" />
                    <field name="partnergender" enable_counters="1" string="Gender" />
                    <field name="dest_id" enable_counters="1" string="Entity" />
                </searchpanel>
            </search>
        </field>
    </record>
    
    


    <record id="destination_membership_member_list_view" model="ir.ui.view">
        <field name="name">destination.membership.member.list.view</field>
        <field name="model">destination.membership.member</field>
        <field name="arch" type="xml">
            <tree>
                <field name="is_manager" invisible="1" />
                <field name="membership_id" optional="show"/>
                <field name="membership_code" optional="hide"/>
                <field name="partner_id" />
                <field name="membership_type" />
                <field name="state" />
                <field name="membership_state" optional="hide" />
                <field name="membership_active" optional="hide" />
                <field name="is_access_late" optional="hide" />
                <field name="current_expiry_date" optional="hide" />
                <field name="current_access_date" optional="hide" />
                <field name="current_processin_date" optional="hide" />
                <field name="current_checkin_date" optional="hide" />
                <field name="current_checkout_date" optional="hide" />
                <button name="request_approval" type="object" class="fa fa-paper-plane oe_read_only" attrs="{'invisible': ['|',['is_manager','=',True],['state','!=','pending']]}" />
                <button name="approve_member" type="object" class="fa fa-check btn-success oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />
                <button name="reject_member" type="object" class="fa fa-times btn-danger oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />

            </tree>
        </field>
    </record>

    <record id="destination_membership_member_form_view" model="ir.ui.view">
        <field name="name">destination.membership.member.form.view</field>
        <field name="model">destination.membership.member</field>
        <field name="arch" type="xml">
            <form duplicate="0">
                <header>
                    <field name="state" widget="statusbar" statusbar_visible="active,pending,inactive" on_change="1" force_save="1" modifiers="{'readonly': true}" />
                    <button name="request_approval" string="Request Approval" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': ['|',['is_manager','=',True],['state','not in',['pending','inactive']]]}" />
                    <button name="approve_member" string="Approve" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />
                    <button name="reject_member" string="Reject" type="object" class="oe_highlight btn-danger oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />
                    <!--
                    <button name="activate_member" confirm="Are you sure you want to activate this member?" string="Activate" type="object" class=" oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],'&amp;',['is_manager','=',True],['state','!=','inactive']]}"/>
                    <button name="deactivate_member" confirm="Are you sure you want to deactivate this member?" string="Deactivate" type="object" class=" oe_read_only" attrs="{'invisible': [['state','not in',['pending','active']]]}"/>
                    -->
                </header>
                <sheet>
                    <group>
                        <field name="name" invisible="1" />
                        <field name="dest_id" required="1" widget="selection" attrs="{'readonly':[['lock_dest_id','=',True]]}" />
                        <field name="lock_dest_id" invisible="1" />

                        <label for="membership_id" class="" />
                        <div>
                            <field name="membership_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" attrs="{'readonly':[['lock_membership_id','=',True]]}" />
                            <span class="ml-2 mr-2" />
                            <field name="membership_state" readonly="1" invisible="0" />
                        </div>


                        <field name="lock_membership_id" invisible="1" />
                        
                        <field name="approval_required" invisible="1" />
                        
                        
                        
                        <field name="is_access_late" invisible="1" />
                        <field name="current_activity_id" invisible="1" />

                        <field name="rental_partner_default_category_ids" invisible="1" />
                        <field name="partnergender" invisible="1" />

                        
                        <label for="partner_id"/>
                        <div class="o_row">
                            <span class="fa fa-mars" style="color:blue; font-weight: 900;" role="img" aria-label="Male" title="Male" attrs="{'invisible':[['partnergender','in',['female',False]]]}"></span>
                            <span class="fa fa-venus" style="color:pink; font-weight: 900;" role="img" aria-label="Female" title="Female" attrs="{'invisible':[['partnergender','in',['male',False]]]}"></span>
                            <field name="partner_id" nolabel="1" class="oe_inline" on_change="1" attrs="{'readonly':[['lock_partner_id','=',True]]}" context="{'form_view_ref':'destinations.destination_partner_wizard_form_view','default_customer_rank': 1, 'default_category_id': rental_partner_default_category_ids}" options="{'no_create_edit': True}" />
                        </div>
                        
                        <field name="lock_partner_id" invisible="1" />
                        <field name="membership_type" />

                        <field name="is_manager" invisible="1" />

                        <field name="current_expiry_date" invisible="1" />
                        <field name="current_access_date" invisible="1" />
                        <field name="current_processin_date" invisible="1" />
                        <field name="current_checkin_date" invisible="1" />
                        <field name="current_checkout_date" invisible="1" />
                    </group>
                    <notebook>
                        <page name="member_activity" string="Member Activity">
                            <field name="member_activity_ids" options="{'no_open':true,'no_create':true}">
                                <tree string="member_activity_ids" edit="false" delete="false" create="false">
                                    <field name="name" widget="section_and_note_text" />
                                    <field name="access_date" />
                                    <field name="expiry_date" />
                                    <field name="processin_date" />
                                    <field name="checkin_date" />
                                    <field name="checkout_date" />
                                    <field name="unit_price" widget="monetary" sum="Total" />
                                    <field name="currency_id" invisible="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />

                                </tree>
                            </field>
                        </page>
                        <page name="attachments" string="Attachments">
                            <field name="attachment_ids" widget="many2many_binary" />
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" modifiers="{}" />
                    <field name="activity_ids" modifiers="{}" />
                    <field name="message_ids" modifiers="{}" />
                </div>
            </form>
        </field>
    </record>


    <record id="destination_membership_list_view" model="ir.ui.view">
        <field name="name">destination.membership.list.view</field>
        <field name="model">destination.membership</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" optional="hide" />
                <field name="partner_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                <field name="dest_id" widget="selection" optional="hide" />
                <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" optional="show" />
                <field name="product_id_code" optional="hide" string="Product Code"/>
                <field name="membership_code" string="Rental Code" optional="hide"/>
                <field name="product_categ_id" readonly="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" optional="hide" />
                <field name="start_date" />
                <field name="end_date"/>
                <field name="amount_untaxed" sum="Rental Untaxed" optional="hide"/>
                <field name="amount_total" sum="Rental Total" optional="show"/>
                <field name="extra_amount_untaxed" sum="Extra Untaxed" optional="hide"/>
                <field name="extra_amount_total" sum="Extra Total" optional="hide"/>
                <field name="total_amount_untaxed" sum="Total Untaxed" optional="hide"/>
                <field name="total_amount_total" sum="Total Amount" optional="hide"/>
                <field name="total_invoiced" sum="Total Invoiced" />
                <field name="total_due" sum="Amount Due"/>
                <field name="state" widget="badge" decoration-success="state == 'active'" decoration-warning="state == 'new' or state == 'confirmed' or state == 'reserved' or state == 'approved'" decoration-danger="state == 'pending' or state == 'expired' or state == 'hold' or state == 'checked-out' or state == 'late'" decoration-muted="state == 'cancel'" decoration-info="state == 'done'" />
                <field name="next_date" widget="remaining_days" nolabel="1" optional="show"/>
                <field name="activity_ids" widget="list_activity" optional="hide" />
                <field name="user_id" widget="many2one_avatar_user" optional="hide"/>
            </tree>
        </field>
    </record>

    <record id="destination_membership_gantt_view" model="ir.ui.view">
        <field name="name">destination.membership.gantt.view</field>
        <field name="model">destination.membership</field>
        <field name="arch" type="xml">
            <gantt string="Rentals" plan="0" color="color" edit="0" date_start="start_date" date_stop="end_date" default_group_by="product_id" create="true" decoration-info="state == 'confirmed' or state == 'pending' or state == 'approved' or state == 'new'">
                <templates>
                    <div t-name="gantt-popover">
                        <div>
                            <strong>Customer  </strong>
                            <t t-esc="partner_id" />
                        </div>
                        <div>
                            <strong>Start   </strong>
                            <t t-esc="userTimezoneStartDate.format('L LT')" />
                        </div>
                        <div>
                            <strong>End  </strong>
                            <t t-esc="userTimezoneStopDate.format('L LT')" />
                        </div>
                        <div>
                            <strong>Status  </strong>
                            <t t-esc="state" />

                        </div>
                    </div>
                </templates>
                <field name="name" modifiers="{&quot;readonly&quot;: true}" />
                <field name="state" modifiers="{}" />
                <field name="partner_id" invisible="0" />
                <field name="color" invisible="1" />
                <field name="progress" invisible="1" />


            </gantt>
        </field>
    </record>

    <record id="destination_membership_form_view" model="ir.ui.view">
        <field name="name">destination.membership.form.view</field>
        <field name="model">destination.membership</field>
        <field name="arch" type="xml">
            <form duplicate="0">
                <header>
                    <field name="can_checkin" invisible="1" />
                    <field name="check_rental_refund_approval" invisible="1" />
                    <field name="amount_lt_invoice" invisible="1" />
                    <field name="so_ids_count" invisible="1" />
                    <field name="state" widget="statusbar" statusbar_visible="new,confirmed,active,done" on_change="1" force_save="1" modifiers="{'readonly': true}" />
                    
                    <button name="request_approval" string="Request Approval" icon="fa-tasks" type="object" class="btn-primary oe_read_only" attrs="{'invisible': ['|','|',['check_approval','=',False],['is_manager','=',True],['state','in',['cancel','pending']]]}" />
                    <button name="approve_order" string="Approve" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />
                    <button name="reject_order" string="Reject" type="object" class="oe_highlight btn-danger oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />
                    <button name="confirm_order" string="Confirm" icon="fa-bookmark" type="object" class="oe_highlight oe_read_only" confirm="Are you sure you want to confirm this order?" attrs="{'invisible': ['|','|',['state','not in',['new','pending','approved']],'&amp;',['is_manager','=',True],['state','in',['pending']],'&amp;','&amp;',['is_manager','!=',True],['state','in',['new','pending']],['check_approval','=',True]]}" />
                    
                    
                    <button name="revert_order_draft" string="Reset to Draft" type="object" class="oe_read_only" attrs="{'invisible': [['state','!=','cancel']]}" />
                    
                    <button name="pick_order" string="Check In" type="object" icon="fa-sign-in" class="oe_highlight oe_read_only" confirm="Are you sure you want to Check-In this order?" attrs="{'invisible': ['|','|',['state','!=','confirmed'],['can_checkin','=',False],'&amp;',['is_manager','=',False],['approval_required','=',True]]}" />
                    <button name="request_checkin" string="Request Check-In" icon="fa-tasks" type="object" class="btn-primary oe_read_only" attrs="{'invisible': ['|','|','|',['state','!=','confirmed'],['can_checkin','=',False],['is_manager','=',True],['approval_required','=',False]]}" />
                    
                    
                    
                    <button name="return_order" string="Check Out" type="object" icon="fa-sign-out" class="oe_highlight oe_read_only" confirm="Are you sure you want to Check-Out this order?" attrs="{'invisible': [['state','not in',['expired','active','hold','late']]]}" />
                    <button name="reactivate_order" string="Re-Activate" type="object" icon="fa-refresh" class="oe_highlight oe_read_only" confirm="Are you sure you want to reactivate this order?" attrs="{'invisible': [['state','!=','hold']]}" />
                    <button name="hold_order" string="Hold" icon="fa-ban" type="object" class="oe_read_only" confirm="Are you sure you want to hold this order?" attrs="{'invisible': [['state','not in',['active','late']]]}" />
                    <button name="close_order" string="Mark as Done" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': [['state','not in',['expired','checked-out']]]}" confirm="Are you sure you want to close this order?" />
                    <button name="cancel_order" string="Cancel" type="object" icon="fa-times" class="oe_read_only" confirm="Are you sure you want to cancel this order?" attrs="{'invisible': [['state','not in',['new','approved','confirmed']]]}" />
                    
                    <button name="invoice_register_payment" string="Register Payment" icon="fa-money" type="object" class="oe_read_only" attrs="{'invisible': ['|',['total_due','=',0],['check_rental_refund_approval','=',True]]}" groups="destinations.destination_super_admin_group,destinations.destination_admin_group,destinations.destination_accounting_group" />
                    <button name="invoice_register_deposit_payment" string="Register Deposit" icon="fa-money" type="object" class="oe_read_only" attrs="{'invisible': ['|',['total_deposit_due','=',0],['check_rental_refund_approval','=',True]]}" groups="destinations.destination_super_admin_group,destinations.destination_admin_group,destinations.destination_accounting_group" />
                    
                    <button name="update_so" icon="fa-refresh" string="Quotation" type="object" class="oe_read_only" confirm="Are you sure you want to issue/update quotation for this order?" attrs="{'invisible': ['|','|',['state','not in',['new','approved','confirmed','active']],['check_rental_refund_approval','=',True],'&amp;',['is_manager','!=',True],['state','in',['new','pending']],['check_approval','=',True]]}" />
                    <button name="recalc_order" icon="fa-refresh" string="Invoice" type="object" class="oe_read_only" confirm="Are you sure you want to issue/update invoice for this order?" attrs="{'invisible': ['|','|',['state','not in',['new','approved','confirmed','active','checked-out']],['check_rental_refund_approval','=',True],'&amp;',['is_manager','!=',True],['state','in',['new','pending']],['check_approval','=',True]]}" />
                    
                    
                    <button name="request_rental_refund" string="Request Refund" icon="fa-fast-backward" type="object" class="oe_read_only" attrs="{'invisible': ['|','|',['amount_lt_invoice','=',False],['check_rental_refund_approval','=',True],['check_approval','=',True]]}" />
                    <button name="approve_rental_refund" string="Approve Refund" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['check_rental_refund_approval','=',False]]}" />
                    <button name="reject_rental_refund" string="Reject Refund" type="object" class="oe_highlight btn-danger oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['check_rental_refund_approval','=',False]]}" />
                    
                    <button name="action_quotation_send" string="Send by Email" icon="fa-send" type="object" class="oe_read_only" attrs="{'invisible': ['|',['state','=','cancel'],['total_sales','=',0]]}" />
                    
                </header>
                <sheet>
                    
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_member" type="object" class="oe_stat_button" icon="fa-id-badge">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="total_members" style="color:green" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Members</span>
                            </div>
                        </button>
                        <button name="action_view_member_activity" type="object" class="oe_stat_button" icon="fa-sign-in">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="member_activity_count" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Access</span>
                            </div>
                        </button>
                        <button name="action_view_guest" type="object" class="oe_stat_button" icon="fa-ticket">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="guest_count" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Guest Access</span>
                            </div>
                        </button>
                        <button name="action_view_deposit" type="object" class="oe_stat_button" icon="fa-lock" attrs="{'invisible': [('deposit_id', '=', False)]}">
                            <field name="deposit_id" invisible="1" />
                            <field name="currency_id" invisible="1" />
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="total_deposit" widget="monetary" modifiers="{&quot;readonly&quot;: true}" options="{'currency_field': 'currency_id'}" />
                                </span>
                                <span class="o_stat_text">Deposit</span>
                            </div>
                        </button>
                        <button name="action_view_deposit" type="object" class="oe_stat_button" icon="fa-lock" attrs="{'invisible': ['|',('deposit_id', '=', False),('total_deposit_due','=',0)]}">
                            <field name="deposit_id" invisible="1" />
                            <field name="currency_id" invisible="1" />
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="total_deposit_due" widget="monetary" modifiers="{&quot;readonly&quot;: true}" options="{'currency_field': 'currency_id'}" />
                                </span>
                                <span class="o_stat_text">Deposit Due</span>
                            </div>
                        </button>
                        <button class="oe_stat_button" icon="fa-shopping-cart" type="object" name="action_view_so" attrs="{'invisible': [['so_ids_count','=',0]]}">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="total_sales" widget="monetary" modifiers="{&quot;readonly&quot;: true}" options="{'currency_field': 'currency_id'}" />
                                </span>
                                <span class="o_stat_text">
                                    Sales Orders
                                </span>
                            </div>
                        </button>
                        <button name="action_view_invoice" type="object" class="oe_stat_button" icon="fa-usd" attrs="{'invisible': [('invoice_count', '=', 0)]}">
                            <field name="invoice_count" invisible="1" />
                            <field name="currency_id" invisible="1" />
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="total_invoiced" widget="monetary" modifiers="{&quot;readonly&quot;: true}" options="{'currency_field': 'currency_id'}" />
                                </span>
                                <span class="o_stat_text">Invoiced</span>
                            </div>
                        </button>
                        <button name="action_view_invoice" type="object" class="oe_stat_button" icon="fa-usd" attrs="{'invisible': [('total_due', '=', 0)]}" modifiers="{&quot;invisible&quot;: [[&quot;total_due&quot;, &quot;=&quot;, 0]]}">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="total_due" widget="monetary" modifiers="{&quot;readonly&quot;: true}" options="{'currency_field': 'currency_id'}" />
                                </span>
                                <span class="o_stat_text">Due</span>
                            </div>
                        </button>


                    </div>
                    <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [['active', '=', True]]}" />
                    
                    <!--
                    <div class="ml-2 badge-pill badge-danger float-right" attrs="{'invisible':[['end_date','&gt;','datetime.datetime.now()']]}">Late</div>
                    <div class="ml-2 badge-pill badge-success float-right" attrs="{'invisible': [('state','!=','active')]}">Active</div>
                    
                    
                    <div class="ml-2 float-right" attrs="{'invisible':[['is_manager','=',False]]}">
                        <label for="no_invoice"/>
                        <field name="no_invoice" />
                    </div>
                    -->
                    
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1" modifiers="{'readonly': true, 'required': true}" />
                        </h1>
                    </div>
                    
                    

                    <div>
                        <group>
                            <group string="Rental Details">
                                
                                <field name="approval_required" readonly="1" invisible="1"/>
                                
                                <field name="active" invisible="1"/>
                                <field name="product_availability" invisible="1"/>
                                <field name="partner_id" context="{'default_customer_rank': 1, 'default_category_id': rental_partner_default_category_ids}" attrs="{'readonly':['|',['state','!=','new'],'&amp;',['state','=','new'],['lock_partner_id','=',True]]}" />
                                <field name="lock_partner_id" invisible="1" />
                                <field name="rental_partner_default_category_ids" invisible="1" />
                                <field name="referral_partner_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" attrs="{'readonly':[['state','!=','new']]}" context="{'default_customer_rank': 1, 'default_category_id': rental_partner_default_category_ids}" />
                                <field name="dest_id" required="1" widget="selection" attrs="{'readonly':['|',['state','!=','new'],'&amp;',['state','=','new'],['lock_dest_id','=',True]]}" />
                                <field name="lock_dest_id" invisible="1" />
                                <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" attrs="{'readonly':['|',['state','!=','new'],'&amp;',['state','=','new'],['lock_product_id','=',True]]}" />
                                <field name="product_categ_id" readonly="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                                <field name="lock_product_id" invisible="1" />
                                <field name="dest_product_group" invisible="1" />
                                <field name="dest_custom_price" invisible="1" />
                                <field name="product_id_dest_code" invisible="1" />
                                <field name="product_id_code" invisible="1" />
                                <field name="manager_ids" invisible="1" />
                                <field name="user_ids" invisible="1" />
                                <field name="is_manager" invisible="1" />
                                <field name="check_approval" invisible="1" force_save="1" />
                                <field name="manager_ids" invisible="1" />
                                <field name="user_ids" invisible="1" />
                                <field name="cat_user_ids" invisible="1" />
                                <field name="previous_state" force_save="1" invisible="1" />
                                <field name="membership_code"/>
                                <label for="start_date" string="Date" />
                                <div class="o_row">
                                    <field name="start_date"  nolabel="1" class="oe_inline" on_change="1" attrs="{'readonly':[['state','not in',['new','approved','confirmed']]]}" />
                                    <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow" />
                                    <field name="end_date"  nolabel="1" class="oe_inline"  on_change="1" attrs="{'readonly':[['state','not in',['new','approved','confirmed','active','late','expired']]]}" />
                                    <span class="fa fa-circle text-danger" role="img" aria-label="Unavailable" title="Unavailable" attrs="{'invisible':[['product_availability','=',True]]}"></span>
                                    <span class="fa fa-circle text-success" role="img" aria-label="Available" title="Available" attrs="{'invisible':[['product_availability','=',False]]}"></span>
                                </div>

                                <label for="dest_checkin_time" string="Check-In/Out" />
                                <div class="o_row">
                                    <field name="dest_checkin_time" widget="daterange" nolabel="1" class="oe_inline" options="{'related_end_date': 'dest_checkout_time'}" readonly="1" force_save="1" />
                                    <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow" />
                                    <field name="dest_checkout_time" widget="daterange" nolabel="1" class="oe_inline" options="{'related_start_date': 'dest_checkin_time'}" readonly="1" force_save="1" />
                                    <span class="fa fa-circle" role="img" style="color:white"></span>
                                </div>
                                <field name="duration" invisible="0" readonly="1" force_save="1" />
                                <field name="duration_unit" invisible="0" readonly="1" force_save="1" />
                                <field name="pickup_date" invisible="1" />
                                <field name="return_date" invisible="1" />
                            </group>

                            <group string="Pricing &amp; Payment">
                                <field name="pricerule_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'readonly':['|',['state','!=','new'],['is_forced_pricerule','=',True]]}" />
                                <field name="is_forced_pricerule" invisible="1" />

                                <label for="dest_custom_price_match" class="" attrs="{'invisible': [['dest_custom_price','!=','daily_rate']]}" />
                                <div attrs="{'invisible': [['dest_custom_price','!=','daily_rate']]}">
                                    <field name="applied_dest_custom_price_match" class="oe_inline" widget="monetary" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_custom_price_match','=',False]]}"> / </span>
                                    <field name="dest_custom_price_match" readonly="1" force_save="1" widget="monetary" />
                                    <span class="ml-4" />
                                    <field name="check_applied_dest_custom_price_match" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_applied_dest_custom_price_match','=','0']]}" />
                                </div>

                                <label for="dest_price_monday" class="" attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}" />
                                <div attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}">
                                    <field name="applied_dest_price_monday" class="oe_inline" widget="monetary" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_price_monday','=',False]]}"> / </span>
                                    <field name="dest_price_monday" widget="monetary" readonly="1" force_save="1" />
                                    <span class="ml-4" />
                                    <field name="check_applied_dest_price_monday" invisible="0" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_applied_dest_price_monday','=','0']]}" />
                                </div>
                                <label for="dest_price_tuesday" class="" attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}" />
                                <div attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}">
                                    <field name="applied_dest_price_tuesday" class="oe_inline" widget="monetary" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_price_tuesday','=',False]]}"> / </span>
                                    <field name="dest_price_tuesday" readonly="1" force_save="1" widget="monetary" />
                                    <span class="ml-4" />
                                    <field name="check_applied_dest_price_tuesday" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_applied_dest_price_tuesday','=','0']]}" />
                                </div>
                                <label for="dest_price_wednesday" class="" attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}" />
                                <div attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}">
                                    <field name="applied_dest_price_wednesday" class="oe_inline" widget="monetary" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_price_wednesday','=',False]]}"> / </span>
                                    <field name="dest_price_wednesday" readonly="1" force_save="1" widget="monetary" />
                                    <span class="ml-4" />
                                    <field name="check_applied_dest_price_wednesday" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_applied_dest_price_wednesday','=','0']]}" />
                                </div>
                                <label for="dest_price_thursday" class="" attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}" />
                                <div attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}">
                                    <field name="applied_dest_price_thursday" class="oe_inline" widget="monetary" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_price_thursday','=',False]]}"> / </span>
                                    <field name="dest_price_thursday" readonly="1" force_save="1" widget="monetary" />
                                    <span class="ml-4" />
                                    <field name="check_applied_dest_price_thursday" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_applied_dest_price_thursday','=','0']]}" />
                                </div>
                                <label for="dest_price_friday" class="" attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}" />
                                <div attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}">
                                    <field name="applied_dest_price_friday" class="oe_inline" widget="monetary" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_price_friday','=',False]]}"> / </span>
                                    <field name="dest_price_friday" readonly="1" force_save="1" widget="monetary" />
                                    <span class="ml-4" />
                                    <field name="check_applied_dest_price_friday" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_applied_dest_price_friday','=','0']]}" />
                                </div>
                                <label for="dest_price_saturday" class="" attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}" />
                                <div attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}">
                                    <field name="applied_dest_price_saturday" class="oe_inline" widget="monetary" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_price_saturday','=',False]]}"> / </span>
                                    <field name="dest_price_saturday" readonly="1" force_save="1" widget="monetary" />
                                    <span class="ml-4" />
                                    <field name="check_applied_dest_price_saturday" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_applied_dest_price_saturday','=','0']]}" />
                                </div>
                                <label for="dest_price_sunday" class="" attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}" />
                                <div attrs="{'invisible': [['dest_custom_price','!=','weekday_rate']]}">
                                    <field name="applied_dest_price_sunday" class="oe_inline" widget="monetary" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_price_sunday','=',False]]}"> / </span>
                                    <field name="dest_price_sunday" readonly="1" force_save="1" widget="monetary" />
                                    <span class="ml-4" />
                                    <field name="check_applied_dest_price_sunday" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_applied_dest_price_sunday','=','0']]}" />
                                </div>

                                <label for="unit_price" class="" attrs="{'invisible': [['dest_custom_price','!=','fixed']]}" />
                                <div attrs="{'invisible': [['dest_custom_price','!=','fixed']]}">
                                    <field name="applied_unit_price" class="oe_inline" widget="monetary" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['unit_price','=',False]]}"> / </span>
                                    <field name="unit_price" readonly="1" force_save="1" widget="monetary" />
                                    <span class="ml-4" />
                                    <field name="check_applied_unit_price" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_applied_unit_price','=','0']]}" />
                                </div>

                                <field name="dest_variable_daily_price" string="Rates" invisible="1" readonly="1" force_save="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'invisible': [['dest_custom_price','!=','daily_rate']]}">
                                    <tree>
                                        <field name="duration" />
                                        <field name="unit" />
                                        <field name="price" />
                                        <field name="currency_id" invisible="1" />
                                    </tree>
                                </field>

                                <label for="discount" class="" />
                                <div>
                                    <field name="discount" class="oe_inline" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span>%</span>
                                    <span class="ml-4" />
                                    <field name="check_discount" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_discount','=','0']]}" />
                                </div>
                                <field name="pricerule_type" invisible="1" />
                                <field name="pricerule_discount" invisible="1" />
                                <field name="service_datetime_start" invisible="1" />
                                <field name="service_datetime_end" invisible="1" />
                                <field name="pricerule_start_date" invisible="1" />
                                <field name="pricerule_end_date" invisible="1" />
                                <field name="unit_price" invisible="1" />
                                <field name="pricerule_unit_price" invisible="1" />
                                <field name="pricing_id" invisible="1" />
                                <field name="unit_price_new" readonly="1" force_save="1" invisible="1" />
                                <field name="dest_custom_price_match" invisible="1" />
                                <field name="pricerule_pricing_id" invisible="1" />
                                <field name="pricerule_duration" invisible="1" />
                                <field name="pricerule_duration_unit" invisible="1" readonly="1" force_save="1" />
                                <field name="pricerule_unit_price_new" invisible="1" />
                                <field name="pricerule_dest_custom_price_match" invisible="1" />
                                <field name="pricerule_dest_price_monday" invisible="1" />
                                <field name="pricerule_dest_price_tuesday" invisible="1" />
                                <field name="pricerule_dest_price_wednesday" invisible="1" />
                                <field name="pricerule_dest_price_thursday" invisible="1" />
                                <field name="pricerule_dest_price_friday" invisible="1" />
                                <field name="pricerule_dest_price_saturday" invisible="1" />
                                <field name="pricerule_dest_price_sunday" invisible="1" />
                                <field name="pricerule_dest_variable_daily_price" invisible="1" readonly="1" force_save="1">
                                    <tree editable="bottom">
                                        <field name="duration" />
                                        <field name="unit" />
                                        <field name="price" />
                                        <field name="currency_id" invisible="1" />
                                    </tree>
                                </field>
                                <label for="payment_term_id" />
                                <div>
                                    <field name="applied_payment_term_id" invisible="0" class="oe_inline" modifiers="{}" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['payment_term_id','=',False]]}"> / </span>
                                    <field name="payment_term_id" readonly="1" invisible="0" force_save="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                                    <span class="ml-4" />
                                    <field name="check_applied_payment_term_id" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_applied_payment_term_id','=','0']]}" />
                                </div>
                                <field name="deposit_id" invisible="1" />

                                <label for="dest_product_security_deposit" string="Security Deposit" />
                                <div>
                                    <field name="dest_product_security_deposit" class="oe_inline" style="width:160px !important" attrs="{'readonly':[['state','!=','new']]}" />
                                    <field name="dest_product_security_deposit_amount" class="oe_inline ml-2 mr-2" style="width:100px !important" attrs="{'readonly':[['state','!=','new']],'required': [['dest_product_security_deposit','=','fixed']], 'invisible' : [['dest_product_security_deposit','!=','fixed']]}" />
                                    <field name="dest_product_security_deposit_percent" class="oe_inline ml-2 mr-2" style="width:100px !important" attrs="{'readonly':[['state','!=','new']],'required': [['dest_product_security_deposit','=','percent']], 'invisible' : [['dest_product_security_deposit','!=','percent']]}" />
                                </div>
                                <field name="dest_product_security_deposit_product" attrs="{'readonly':[['state','!=','new']],'required': [['dest_product_security_deposit','!=',False]], 'invisible' : [['dest_product_security_deposit','=',False]]}" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />

                                <field name="rental_payment_method_ids" invisible="1" />
                                <field name="rental_payment_method_id" string="Rental Payment" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'readonly':[['state','not in',['new','approved','confirmed','active','late','expired']]]}" />
                                <field name="rental_deposit_payment_method_id" string="Deposit Payment" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'readonly':['|',['deposit_id','!=',False],['state','not in',['new','approved','confirmed','active','late','expired']]]}" />


                            </group>


                            <group string="Accessibility &amp; Users">
                                <label for="dest_member_count" class="" />
                                <div>
                                    <field name="actual_dest_member_count" invisible="0" class="oe_inline" modifiers="{}" readonly="1" force_save="1" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_member_count','=',False]]}"> / </span>
                                    <field name="dest_member_count" readonly="1" force_save="1" invisible="0" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_member_count','=',False]]}"> (Male </span>
                                    <field name="actual_dest_member_male_count" invisible="0" class="oe_inline" modifiers="{}" readonly="1" force_save="1" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_member_male_count','=',False]]}"> / </span>
                                    <field name="dest_member_male_count" readonly="1" force_save="1" invisible="0" />)
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_member_count','=',False]]}"> (Female </span>
                                    <field name="actual_dest_member_female_count" invisible="0" class="oe_inline" modifiers="{}" readonly="1" force_save="1" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_member_female_count','=',False]]}"> / </span>
                                    <field name="dest_member_female_count" readonly="1" force_save="1" invisible="0" />)
                                    <span class="ml-4" />
                                    <field name="check_actual_dest_member_count" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_actual_dest_member_count','=','0']]}" />
                                    <field name="check_actual_dest_member_male_count" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_actual_dest_member_male_count','=','0']]}" />
                                    <field name="check_actual_dest_member_female_count" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_actual_dest_member_female_count','=','0']]}" />
                                </div>
                                <field name="dest_product_access_rule" widget="radio"/>
                                <!--
                                <label for="dest_daily_guest_count" class="" />
                                <div>
                                    <field name="actual_dest_daily_guest_count" style="max-width:30px !important" invisible="0" class="oe_inline" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_daily_guest_count','=',False]]}"> / </span>
                                    <field name="dest_daily_guest_count" readonly="1" style="max-width:30px !important" force_save="1" invisible="0" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_daily_guest_count','=',False]]}"> Male </span>
                                    <field name="actual_dest_daily_guest_male_count" style="max-width:30px !important" invisible="0" class="oe_inline" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_daily_guest_male_count','=',False]]}"> / </span>
                                    <field name="dest_daily_guest_male_count" style="max-width:30px !important" readonly="1" force_save="1" invisible="0" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_daily_guest_count','=',False]]}"> Female </span>
                                    <field name="actual_dest_daily_guest_female_count" style="max-width:30px !important" invisible="0" class="oe_inline" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_daily_guest_female_count','=',False]]}"> / </span>
                                    <field name="dest_daily_guest_female_count" style="max-width:30px !important" readonly="1" force_save="1" invisible="0" />
                                    <span class="ml-4" />
                                    <field name="check_actual_dest_daily_guest_count" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_actual_dest_daily_guest_count','=','0']]}" />
                                    <field name="check_actual_dest_daily_guest_male_count" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_actual_dest_daily_guest_male_count','=','0']]}" />
                                    <field name="check_actual_dest_daily_guest_female_count" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_actual_dest_daily_guest_female_count','=','0']]}" />
                                </div>
                                <label for="dest_month_free_guest_count" class="" />
                                <div>
                                    <field name="actual_dest_month_free_guest_count" invisible="0" class="oe_inline" modifiers="{}" attrs="{'readonly':[['state','!=','new']]}" />
                                    <span class="ml-2 mr-2" attrs="{'invisible': [['dest_month_free_guest_count','=',False]]}"> / </span>
                                    <field name="dest_month_free_guest_count" readonly="1" force_save="1" invisible="0" />
                                    <span class="ml-4" />
                                    <field name="check_actual_dest_month_free_guest_count" style="color: red" readonly="1" force_save="1" attrs="{'invisible': [['check_actual_dest_month_free_guest_count','=','0']]}" />
                                </div>
                                -->

                            </group>

                            <group string="Quotation &amp; Invoicing">
                                <field name="date_order" attrs="{'readonly':[['state','!=','new']]}" />
                                <field name="date_expiry" attrs="{'readonly':[['state','!=','new']]}" />
                                <field name="user_id" widget="many2one_avatar_user" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                                <field name="company_id" invisible="1" />
                                <field name="rental_sales_journal_id" invisible="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />

                                <field name="dest_invoice_policy" readonly="1" invisible="1" force_save="1" />
                                <field name="so_ids" invisible="1" />
                                <field name="no_invoice" attrs="{'invisible':[['is_manager','=',False]], 'readonly':['|',['state','!=','new'],['so_ids_count','!=',0]]}"/>
                                <field name="invoice_old_id" attrs="{'invisible':[['no_invoice','=',False]]}"/>

                            </group>

                        </group>


                    </div>

                    <notebook>
                        <page name="membership_lines" string="Rental Lines">
                            <field name="membership_lines" options="{'no_open':true,'no_create':true}">
                                <tree string="Rental Lines" edit="false" delete="false" create="false">
                                    <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                                    <field name="name" widget="section_and_note_text" />
                                    <field name="quantity" />
                                    <field name="unit" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                                    <field name="unit_price" widget="monetary" />
                                    <field name="tax_id" widget="many2many_tags" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                                    <field name="discount" string="Disc.%" />
                                    <field name="price_subtotal" widget="monetary" />
                                    <field name="price_tax" widget="monetary" />
                                    <field name="price_total" widget="monetary" />
                                    <field name="start_date" invisible="1" />
                                    <field name="end_date" invisible="1" />
                                    <field name="currency_id" invisible="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />

                                </tree>
                            </field>
                            <group name="note1_group" col="6" class="mt-2 mt-md-0">
                                <group colspan="4"></group>
                                <group class="oe_subtotal_footer oe_right" colspan="2" name="rental_total">
                                    <field name="amount_untaxed" />
                                    <field name="amount_tax" />
                                    <field name="amount_total" />
                                </group>
                                <div class="oe_clear" />
                            </group>
                            <group name="note2_group" col="6" class="mt-2 mt-md-0">
                                <group colspan="4"></group>
                                <group class="oe_subtotal_footer oe_right" colspan="2" name="extras_total">
                                    <field name="extra_amount_untaxed" />
                                    <field name="extra_amount_tax" />
                                    <field name="extra_amount_total" />
                                </group>
                                <div class="oe_clear" />
                            </group>
                            <group name="note3_group" col="6" class="mt-2 mt-md-0">
                                <group colspan="4"></group>
                                <group class="oe_subtotal_footer oe_right" colspan="2" name="total_total">
                                    <field name="total_amount_untaxed" />
                                    <field name="total_amount_tax" />
                                    <field name="total_amount_total" />
                                </group>
                                <div class="oe_clear" />
                            </group>

                        </page>
                        <page name="extra_lines" string="Extras Lines">
                            <field name="extra_lines" options="{'no_open':true}">
                                <tree string="Extra Lines" editable="bottom">
                                    <field name="extra_date"/>
                                    <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                                    <field name="name" widget="section_and_note_text" />
                                    <field name="quantity" />
                                    <field name="unit" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                                    <field name="unit_price" widget="monetary" />
                                    <field name="tax_id" widget="many2many_tags" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                                    <field name="discount" string="Disc.%" />
                                    <field name="price_subtotal" widget="monetary" />
                                    <field name="price_tax" widget="monetary" />
                                    <field name="price_total" widget="monetary" />
                                    <field name="currency_id" invisible="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />

                                </tree>
                            </field>
                            <group name="note2_group" col="6" class="mt-2 mt-md-0">
                                <group colspan="4"></group>
                                <group class="oe_subtotal_footer oe_right" colspan="2" name="extras_total">
                                    <field name="extra_amount_untaxed" />
                                    <field name="extra_amount_tax" />
                                    <field name="extra_amount_total" />
                                </group>
                                <div class="oe_clear" />
                            </group>

                        </page>
                        <page name="access_caps" string="Guest Access" attrs="{'invisible': [['dest_product_access_rule','=','standard']]}">
                            <group>
                                <button name="generate_access_caps" confirm="Are you sure you want to clear and update Access Rules?" string="Retrieve Rules" class="oe_highlight" type="object"/> 
                            </group>
                            <field name="dest_product_access_cap" widget="section_one2many" string="Access Products" nolabel="1" options="{'no_open':true,'no_create':true}">
                                
                                <tree editable="bottom" >
                                    <field name="sequence" widget="handle"/>
                                    <field name="product_ids" widget="many2many_tags"/>
                                    <field name="period"/>
                                    <field name="cap"/>
                                    <field name="free_guest"/>
                                    <field name="state" readonly="1"/>
                                    <field name="dest_id" invisible="1"/>
                                    <field name="is_manager" invisible="1"/>
                                    <button name="request_approval" type="object" class="fa fa-paper-plane oe_read_only" attrs="{'invisible': ['|',['is_manager','=',True],['state','!=','pending']]}" />
                                    <button name="approve_cap" type="object" class="fa fa-check btn-success oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />
                                    <button name="reject_cap" type="object" class="fa fa-times btn-danger oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />


                                </tree>
                            </field>
                        </page>
                        <page name="attachments" string="Attachments">
                            <group>
                                <field name="attachment_ids" widget="many2many_binary" />
                            </group>
                        </page>
                        <page name="note" string="Note">
                            <group>
                                <field name="note_template" />
                                <field name="note" />
                            </group>
                        </page>

                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" modifiers="{}" />
                    <field name="activity_ids" modifiers="{}" />
                    <field name="message_ids" modifiers="{}" />
                </div>

            </form>
        </field>
    </record>


    <record id="view_order_tree_inherit_dest" model="ir.ui.view">
        <field name="name">sale.order.tree.inherit.dest</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree" />
        <field name="groups_id" eval="[
                                            (4, ref('destinations.destination_admin_group')),
                                          (4, ref('destinations.destination_super_admin_group')),
                                            (4, ref('destinations.destination_accounting_group')),
                                            (4, ref('destinations.destination_sales_group')),
                                            (4, ref('destinations.destination_guest_process_group')),
                                            (4, ref('destinations.destination_guest_checking_group')),
                                            (4, ref('destinations.destination_guest_registration_group'))
                                            ]" />
        <field name="arch" type="xml">
            <xpath expr="//tree[1]/field[@name='name']" position="after">
    <field name="dest_id" optional="show"/>
    <field name="membership_id" optional="show"/>
    <field name="dest_source" string="Sales Type" optional="hide"/>
  </xpath>
        </field>
    </record>
    
    <record id="view_order_form_inherit_dest" model="ir.ui.view">
        <field name="name">sale.order.form.inherit.dest</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form" />
        <field name="groups_id" eval="[
                                            (4, ref('destinations.destination_admin_group')),
                                          (4, ref('destinations.destination_super_admin_group')),
                                            (4, ref('destinations.destination_accounting_group')),
                                            (4, ref('destinations.destination_sales_group')),
                                            (4, ref('destinations.destination_guest_process_group')),
                                            (4, ref('destinations.destination_guest_checking_group')),
                                            (4, ref('destinations.destination_guest_registration_group'))
                                            ]" />
        <field name="arch" type="xml">
            <xpath expr="//group[@name='partner_details']" position="inside">
                
                <field name="is_manager" invisible="1" force_save="1" />
                <field name="dest_id"  attrs="{'invisible': [['dest_source','=',False]], 'readonly':[['dest_source','=','rental']]}" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                <field name="membership_id"  attrs="{'invisible': [['dest_source','=',False]], 'readonly':[['dest_source','=','rental']]}" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                <field name="dest_source" invisible="1" widget="selection" readonly="1" force_save="1" attrs="{'invisible': [['dest_source','=',False]]}"/>

                
            </xpath>
        </field>
    </record>
    
    
    
    <record id="view_order_search_inherit_dest" model="ir.ui.view">
        <field name="name">sale.order.search.inherit.dest</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_sales_order_filter" />
        <field name="arch" type="xml">
            
          <xpath expr="//filter[@name='order_month']" position="after">
                <filter name="dest_sale_order_group_dest" string="Entity" context="{'group_by': 'dest_id'}"/>

              <filter name="dest_sale_order_group_source" string="Order Source" context="{'group_by': 'dest_source'}"/>
            <filter name="dest_sale_order_group_membership" string="Rental" context="{'group_by': 'membership_id'}"/>
          </xpath>
            
        </field>
    </record>


    <record id="view_partner_form_inherit_dest" model="ir.ui.view">
        <field name="name">partner.form.inherit.dest</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="groups_id" eval="[
                                            (4, ref('destinations.destination_admin_group')),
                                          (4, ref('destinations.destination_super_admin_group')),
                                            (4, ref('destinations.destination_accounting_group')),
                                            (4, ref('destinations.destination_sales_group')),
                                            (4, ref('destinations.destination_guest_process_group')),
                                            (4, ref('destinations.destination_guest_checking_group')),
                                            (4, ref('destinations.destination_guest_registration_group'))
                                            ]" />
        <field name="arch" type="xml">

            <xpath expr="//div[@name='button_box']/button[1]" position="before">
                <button class="oe_stat_button" icon="fa-key" type="object" name="action_view_membership">
                    <field widget="statinfo" name="membership_count" string="Rentals" />
                </button>
                <button class="oe_stat_button" icon="fa-id-badge" type="object" name="action_view_member">
                    <field widget="statinfo" name="member_count" string="Members" />
                </button>
            </xpath>
            <xpath expr="//field[@name='vat']" position="after">
                <field name="id_number" />
                <field name="partnergender" widget="radio" attrs="{'invisible': [['is_company','=',True]]}" />
            </xpath>
        </field>
    </record>

    <record id="destination_guest_list_view" model="ir.ui.view">
        <field name="name">destination.guest.list.view</field>
        <field name="model">destination.guest</field>
        <field name="arch" type="xml">
            <tree create="1" edit="1" expand="1" decoration-danger="state == 'blacklist' or state == 'late'" decoration-warning="state == 'pending'">
                <field name="name" optional="hide" />
                <field name="dest_id" required="1"  />
                <field name="access_date" />
                <field name="active_membership_ids" invisible="1"/>
                <field name="access_partner_default_category_ids" invisible="1" />
                
                <field name="access_date_date" invisible="1" />
                <field name="access_date_month" invisible="1" />
                <field name="access_date_weekday" invisible="1" />
                <field name="access_date_time" invisible="1" />
                <field name="member_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" attrs="{'readonly': [['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" />
                <field name="membership_id" invisible="1" />
                <field name="guest_id" options="{'no_create_edit': False}" attrs="{'readonly': ['|',['dest_id','=',False],'&amp;',['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" context="{'form_view_ref':'destinations.destination_partner_wizard_form_view','default_customer_rank': 1, 'default_category_id': access_partner_default_category_ids}"  />
                
                <field name="token_type" />
                <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                <field name="checkin_date" invisible="1" />
                <field name="expiry_date" optional="hide" readonly="1" force_save="1" />
                <field name="checkout_date" invisible="1" />
                <field name="guestquota" invisible="1" />
                <field name="guestquotafree" invisible="1" />
                <field name="usedguestquota" invisible="1" />
                <field name="usedguestquotafree" invisible="1" />
                <field name="pricerule_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'readonly':[['is_forced_pricerule','=',True]]}" optional="hide" />
                <field name="is_forced_pricerule" invisible="1" />
                <field name="note" optional="hide" />
                <field name="access_exceptions" optional="hide" />
                <field name="unit_price" readonly="1" force_save="1" />
                <field name="state" force_save="1" widget="badge" decoration-success="state == 'new'" decoration-warning="state == 'pending'" decoration-danger="state == 'blacklist' or state == 'late'" />
                
                <field name="access_code" optional="hide" readonly="1" />
                <field name="invoice_ids" widget="many2many_tags" optional="hide" />
                <field name="is_expired" invisible="1" />
                <field name="is_today" invisible="1" />
                <field name="is_manager" invisible="1" />
                <field name="activity_ids" widget="list_activity" invisible="1" />
                <button name="request_approval" type="object" class="fa fa-paper-plane oe_read_only" attrs="{'invisible': ['|',['is_manager','=',True],['state','!=','pending']]}" />
                <button name="approve_guest" type="object" class="fa fa-check btn-success oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />
                <button name="reject_guest" type="object" class="fa fa-times btn-danger oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />
            </tree>
        </field>
    </record>
    
    <!--<record id="destination_guest_batch_form_view" model="ir.ui.view">
        <field name="name">destination.guest.batch.form.view</field>
        <field name="model">destination.guest.batch</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                <div class="oe_title">
                    <h1>
                        <field name="name" readonly="1" modifiers="{'readonly': true, 'required': true}" />
                    </h1>
                </div>
                <group name="access_details" string="Access Details">
                            
                            <field name="dest_id" widget="selection" required="1" attrs="{'readonly': ['|',['is_manager','=',False],['lock_dest_id','=',True]]}" />
                            <field name="lock_dest_id" invisible="1" />
            
                            <field name="active_membership_ids" invisible="1" />
                            <field name="is_manager" invisible="1" />
                           
                            <field name="access_date" attrs="{'readonly': [['is_manager','=',False]]}" />
                            <field name="access_date_date" invisible="1" />
                            <field name="access_date_month" invisible="1" />
                            <field name="access_date_weekday" invisible="1" />
                            <field name="access_date_time" invisible="1" />
                    
                            <field name="member_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" attrs="{'readonly': [['is_manager','=',False]]}" />
                        <field name="notes"/>
                </group>
                    <group string="Access Products" invisible="1" >
                            <field name="access_products_ids" widget="section_one2many" string="Access Products" nolabel="1" >
                                <tree>
                                    <field name="product_ids" widget="many2many_tags" />
                                    <field name="period"/>
                                    <field name="cap"/>
                                    <field name="free_guest"/>
                                    <field name="dest_id" invisible="1"/>
                                </tree>
                            </field>
                        </group>
                    
                    <group string="Access Caps/Usage" >
                            <field name="guest_batch_products_ids" options="{'no_open': True, 'no_create': True}" widget="section_one2many" string="Access Products" nolabel="1" >
                                <tree>
                                    <field name="product_ids" widget="many2many_tags" />
                                    <field name="period"/>
                                    <field name="cap"/>
                                    <field name="free_guest"/>
                                    <field name="used_cap" string="Used"/>
                                    <field name="dest_id" invisible="1"/> 
                                    <field name="guest_batch_id" invisible="1"/>
                                    <field name="membership_id" invisible="1"/>
                                    <field name="access_date" invisible="1"/>
                                    <field name="access_date_date" invisible="1"/>
                                    <field name="access_date_month" invisible="1"/>

                                </tree>
                            </field>
                        </group>
                    
                <notebook>
                        <page name="guest_ids_page" string="Guests">
                            
                            <field name="guest_ids" widget="section_one2many" string="Guest List" nolabel="1" context="{'default_access_date': access_date, 'default_member_id': member_id, 'default_dest_id': dest_id}" options="{'no_open': True}">
                                <tree create="1" delete="1" editable="bottom">
                                    
                               
                       <field name="access_products_ids" widget="many2many_tags" invisible="1"/>
                            
                            <field name="dest_id" invisible="1" widget="selection" required="1" attrs="{'readonly': ['|','&amp;',['is_manager','=',False],['state','not in',['new','pending','blacklist']],'&amp;',['state','in',['new','pending']],['lock_dest_id','=',True]]}" />
                            <field name="lock_dest_id" invisible="1" />
                            <field name="access_partner_default_category_ids" invisible="1" />
                            <field name="active_membership_ids" invisible="1" />
                            <field name="is_male" invisible="1" />
                            <field name="is_female" invisible="1" />
                            <field name="access_date" attrs="{'readonly': [['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" />
                            <field name="member_id" invisible="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" attrs="{'readonly': [['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" />
                            
                            <field name="guest_id"  on_change="1" options="{'no_create_edit': False}" attrs="{'readonly': ['|',['dest_id','=',False],'&amp;',['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" context="{'form_view_ref':'destinations.destination_partner_wizard_form_view','default_customer_rank': 1, 'default_category_id': access_partner_default_category_ids}"  />
                           
                            
                            <field name="guest_gender" invisible="1"/>
                            <field name="is_male" invisible="1" />
                            <field name="is_female" invisible="1" />
                            
                            <field name="token_type" attrs="{'readonly': [['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" />
                            <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" attrs="{'readonly': [['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" />

                            <field name="pricerule_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'readonly':['|',['is_forced_pricerule','=',True],'&amp;',['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" optional="hide" />
                            <field name="is_forced_pricerule" invisible="1" />

                            <field name="company_id" invisible="1" />
                            <field name="access_sales_journal_id" invisible="1" />
                            <field name="access_payment_method_id" invisible="1" />

                            <field name="access_date_date" invisible="1" />
                            <field name="access_date_month" invisible="1" />
                            <field name="access_date_weekday" invisible="1" />
                            <field name="access_date_time" invisible="1" />

                            <field name="membership_id" invisible="1" />
                            <field name="is_manager" invisible="1" />
                            <field name="guestquota" invisible="1" />
                            <field name="guestquotafree" invisible="1" />
                            <field name="usedguestquota" invisible="1" />
                            <field name="usedguestquotafree" invisible="1" />
                       
                            <field name="unit_price" invisible="0" readonly="1" force_save="1" widget="monetary" options="{'currency_field': 'currency_id'}" />
                            <field name="expiry_date" string="Token Expiry" readonly="1" force_save="1"/>
                            <field name="access_code" invisible="0" optional="hide" readonly="1" force_save="1" attrs="{'invisible': [['access_code','=',False]]}" />
                        
                            <field name="access_exceptions" invisible="1" readonly="1" force_save="1" attrs="{'invisible': [['access_exceptions','=',False]]}" />
                            <field name="note" invisible="0" />
                        
                            <field name="create_date" invisible="1" readonly="1" force_save="1" string="Create" />
                            <field name="processin_date" invisible="1"  readonly="1" force_save="1" string="Process" />
                            <field name="checkin_date" invisible="1"  readonly="1" force_save="1" string="Check-In" />
                            <field name="expiry_date" invisible="1"  string="Expire" readonly="1" force_save="1" />
                            <field name="checkout_date" invisible="1"  readonly="1" force_save="1" string="Check-Out" />
                            <field name="close_date" invisible="1"  readonly="1" force_save="1" string="Close" />
                        

                                    
                                    
                                    
                                    <field name="currency_id" invisible="1" />
                            
                                    
                            <field name="name" readonly="1" invisible="1"  />
                                    
                                    
                                     <field name="state" force_save="1" />
                    
                            
                            
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                </tree>
                            </field>

                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    -->
    <record id="destination_guest_form_view" model="ir.ui.view">
        <field name="name">destination.guest.form.view</field>
        <field name="model">destination.guest</field>
        <field name="arch" type="xml">
            <form create="1" edit="1" duplicate="0">
                <header>
                    <field name="state" widget="statusbar" statusbar_visible="new,inprocess,checked-in,checked-out,done" modifiers="{'readonly': true}" force_save="1" />
                    <button name="request_approval" string="Request Approval" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': ['|',['is_manager','=',True],['state','!=','pending']]}" />
                    <button name="approve_guest" string="Approve" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />
                    <button name="reject_guest" string="Reject" type="object" class="oe_highlight btn-danger oe_read_only" attrs="{'invisible': ['|',['is_manager','=',False],['state','!=','pending']]}" />
                    <!--
                    <button name="process_guest" string="Process" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': [['state','!=','new']]}"/>
                    <button name="checkin_guest" string="Check-In" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': [['state','!=','inprocess']]}"/>
                    <button name="checkout_guest" string="Check-Out" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': [['state','not in',['checked-in','late']]]}"/>
                    -->
                    <button name="done_guest" string="Mark as Done" type="object" class="oe_highlight oe_read_only" attrs="{'invisible': [['state','not in',['expired','checked-out']]]}" />
                    <button name="clone_guest" string="Clone" type="object" class="oe_read_only" />
                    
                    <!--<button name="cancel_guest" string="Cancel" type="object" confirm="Are you sure you want to cancel this guest?" class="oe_read_only" attrs="{'invisible': [['state','!=','done']]}" />-->

                </header>

                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_invoice" type="object" class="oe_stat_button" icon="fa-pencil-square-o" attrs="{'invisible': [('invoice_count', '=', 0)]}" modifiers="{&quot;invisible&quot;: [[&quot;invoice_count&quot;, &quot;=&quot;, 0]]}">
                            <field name="invoice_count" invisible="1" />
                            <field name="currency_id" invisible="1" />
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="total_invoiced" widget="monetary" modifiers="{&quot;readonly&quot;: true}" options="{'currency_field': 'currency_id'}" />
                                </span>
                                <span class="o_stat_text">Invoiced</span>
                            </div>
                        </button>
                        <button name="action_view_invoice" type="object" class="oe_stat_button" icon="fa-pencil-square-o" attrs="{'invisible': [('total_due', '=', 0)]}" modifiers="{&quot;invisible&quot;: [[&quot;total_due&quot;, &quot;=&quot;, 0]]}">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="total_due" widget="monetary" modifiers="{&quot;readonly&quot;: true}" options="{'currency_field': 'currency_id'}" />
                                </span>
                                <span class="o_stat_text">Due</span>
                            </div>
                        </button>
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1" modifiers="{'readonly': true, 'required': true}" />
                        </h1>
                    </div>
                    <group>
                        <group name="access_details" string="Access Details">
                            <field name="dest_id" widget="selection" required="1" attrs="{'readonly': ['|','&amp;',['is_manager','=',False],['state','not in',['new','pending','blacklist']],'&amp;',['state','in',['new','pending']],['lock_dest_id','=',True]]}" />
                            <field name="lock_dest_id" invisible="1" />
                            <field name="access_partner_default_category_ids" invisible="1" />
                            <field name="active_membership_ids" invisible="1" />
                            <field name="is_male" invisible="1" />
                            <field name="is_female" invisible="1" />
                            <field name="access_date" attrs="{'readonly': [['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" />
                            <field name="member_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'readonly': [['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" />
                            <!--<field name="guest_id" options="{'no_create_edit': False}" attrs="{'readonly': ['|',['dest_id','=',False],'&amp;',['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" context="{'form_view_ref':'destinations.destination_partner_wizard_form_view','default_customer_rank': 1, 'default_category_id': access_partner_default_category_ids}"  />-->
                            <label for="guest_id"/>
                            <div class="o_row">
                                <span class="fa fa-mars" style="color:blue; font-weight: 900;" role="img" aria-label="Male" title="Male" attrs="{'invisible':[['guest_gender','in',['female',False]]]}"></span>
                                <span class="fa fa-venus" style="color:pink; font-weight: 900;" role="img" aria-label="Female" title="Female" attrs="{'invisible':[['guest_gender','in',['male',False]]]}"></span>
                                <field name="guest_id" nolabel="1" class="oe_inline" on_change="1" options="{'no_create_edit': False}" attrs="{'readonly': ['|',['dest_id','=',False],'&amp;',['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" context="{'search_view_ref':'destinations.destination_res_partner_search_view','form_view_ref':'destinations.destination_partner_wizard_form_view','default_customer_rank': 1, 'default_category_id': access_partner_default_category_ids}"  />
                            </div>
                            
                            <field name="guest_gender" invisible="1"/>
                            <field name="is_male" invisible="1" />
                            <field name="is_female" invisible="1" />
                            
                            <field name="token_type" attrs="{'readonly': [['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" />
                            <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" attrs="{'readonly': [['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" />

                            <field name="pricerule_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'readonly':['|',['is_forced_pricerule','=',True],'&amp;',['is_manager','=',False],['state','not in',['new','pending','blacklist']]]}" optional="hide" force_save="1" />
                            <field name="is_forced_pricerule" invisible="1" />

                            <field name="company_id" invisible="1" />
                            <field name="access_sales_journal_id" invisible="1" />
                            <field name="access_payment_method_id" invisible="1" />

                            <field name="access_date_date" invisible="1" />
                            <field name="access_date_month" invisible="1" />
                            <field name="access_date_weekday" invisible="1" />
                            <field name="access_date_time" invisible="1" />

                            <field name="membership_id" invisible="1" />
                            <field name="access_products_ids" widget="many2many_tags" invisible="1"/>
                            <field name="is_manager" invisible="1" />
                            <field name="guestquota" invisible="1" />
                            <field name="guestquotafree" invisible="1" />
                            <field name="usedguestquota" invisible="1" />
                            <field name="usedguestquotafree" invisible="1" />
                        </group>
                        <group name="access_token" string="Access Token">
                            <field name="unit_price" invisible="0" readonly="1" force_save="1" widget="monetary" options="{'currency_field': 'currency_id'}" />
                            <field name="expiry_date" string="Token Expiry" readonly="1" force_save="1"/>
                            <field name="access_code" invisible="0" readonly="1" force_save="1" attrs="{'invisible': [['access_code','=',False]]}" />
                        </group>
                        <group name="notes" string="Remarks">
                            <field name="access_exceptions" invisible="0" style="color:red" readonly="1" force_save="1" attrs="{'invisible': [['access_exceptions','=',False]]}" />
                            <field name="note" invisible="0" />
                            
                        </group>
                        <group name="time_log" string="Token Time Log">
                            <field name="create_date" readonly="1" force_save="1" string="Create" />
                            <field name="processin_date" readonly="1" force_save="1" string="Process" />
                            <field name="checkin_date" readonly="1" force_save="1" string="Check-In" />
                            <field name="expiry_date" string="Expire" readonly="1" force_save="1" />
                            <field name="checkout_date" readonly="1" force_save="1" string="Check-Out" />
                            <field name="close_date" readonly="1" force_save="1" string="Close" />
                        </group>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" modifiers="{}" />
                    <field name="activity_ids" modifiers="{}" />
                    <field name="message_ids" modifiers="{}" />
                </div>

            </form>
        </field>
    </record>


    

    <record id="destination_blacklist_list_view" model="ir.ui.view">
        <field name="name">destination.blacklist.list.view</field>
        <field name="model">destination.blacklist</field>
        <field name="arch" type="xml">
            <tree editable="bottom">
                <field name="dest_id" />
                <field name="partner_id" context="{'form_view_ref':'destinations.destination_partner_wizard_form_view'}" />
                <field name="start_date" />
                <field name="end_date" />
                <field name="state" />
            </tree>
        </field>
    </record>

    <record id="destination_price_list_view" model="ir.ui.view">
        <field name="name">destination.price.list.view</field>
        <field name="model">destination.price</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" />
                <field name="validity_datetime_start" />
                <field name="validity_datetime_end" />
                <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
            </tree>
        </field>
    </record>

    <record id="destination_price_form_view" model="ir.ui.view">
        <field name="name">destination.price.form.view</field>
        <field name="model">destination.price</field>
        <field name="arch" type="xml">
            <form duplicate="0">
                <sheet>

                    <group>
                        <field name="name" />
                        <field name="dest_id" widget="selection" required="1" attrs="{'readonly':[['lock_dest_id','=',True]]}" />
                        <field name="lock_dest_id" invisible="1" />
                        <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" attrs="{'readonly':[['lock_product_id','=',True]]}" />
                        <field name="dest_product_code" string="Product Code" readonly="0" invisible="1" />
                        <field name="lock_product_id" invisible="1" />
                        <field name="rule_type" />


                        <field name="is_forced" />
                        <field name="customer_apply_on" invisible="0" />
                        <field name="referral_apply_on" invisible="0" />
                        <label for="validity_datetime_start" string="Validity" />
                        <div class="o_row">
                            <field name="validity_datetime_start" widget="daterange" nolabel="1" class="oe_inline" options="{'related_end_date': 'validity_datetime_end'}" on_change="1" />
                            <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow" />
                            <field name="validity_datetime_end" widget="daterange" nolabel="1" class="oe_inline" options="{'related_start_date': 'validity_datetime_start'}" on_change="1" />
                        </div>
                        <label for="validity_datetime_start" string="Service Dates" attrs="{'invisible': ['|',['dest_product_group','in',['access','others']],'&amp;',['product_id','=',False],['dest_product_group','=',False]]}" />
                        <div class="o_row" attrs="{'invisible': ['|',['dest_product_group','in',['access','others']],'&amp;',['product_id','=',False],['dest_product_group','=',False]]}">
                            <field name="service_datetime_start" widget="daterange" nolabel="1" class="oe_inline" options="{'related_end_date': 'service_datetime_end'}" on_change="1" attrs="{'required': [['dest_product_group','!=','access']]}" />
                            <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow" />
                            <field name="service_datetime_end" widget="daterange" nolabel="1" class="oe_inline" options="{'related_start_date': 'service_datetime_start'}" on_change="1" attrs="{'required': [['dest_product_group','!=','access']]}" />
                        </div>
                        <field name="service_timeonly_start" widget="float_time" attrs="{'invisible': ['|',['dest_custom_price','=','weekday_rate'],['dest_product_group','!=','access']],'required': ['|',['dest_custom_price','!=','weekday_rate'],['dest_product_group','=','access']]}" />
                        <field name="service_timeonly_end" widget="float_time" attrs="{'invisible': ['|',['dest_custom_price','=','weekday_rate'],['dest_product_group','!=','access']],'required': ['|',['dest_custom_price','!=','weekday_rate'],['dest_product_group','=','access']]}" />
                        <field name="dest_checkin_time" widget="float_time" attrs="{'invisible' : [['dest_product_group','in',['access','others']]]}" />
                        <field name="dest_checkout_time" widget="float_time" attrs="{'invisible' : [['dest_product_group','in',['access','others']]]}" />
                        <field name="dest_access_start_time" widget="float_time" attrs="{'invisible':['|',('dest_product_group','!=','access'),'&amp;',('dest_product_group','=','access'),('dest_custom_price','=','weekday_rate')]}" />
                        <field name="dest_access_duration" widget="float_time" attrs="{'invisible':['|',('dest_product_group','!=','access'),'&amp;',('dest_product_group','=','access'),('dest_custom_price','=','weekday_rate')]}" />
                        <field name="dest_guest_gender_male" attrs="{'invisible': [['dest_product_group','!=','access']]}" />
                        <field name="dest_guest_gender_female" attrs="{'invisible': [['dest_product_group','!=','access']]}" />
                    </group>
                    <group name="product_info">
                        <field name="dest_product_group" string="Product Group" widget="radio" options="{'horizontal':false}" invisible="1" />
                        <field name="dest_custom_price" string="Custom Price" widget="radio" options="{'horizontal':false}" invisible="1" />
                    </group>
                    <group name="type_discount" attrs="{'invisible': [['rule_type','=','price']]}">
                        <field name="discount" />
                    </group>

                    <group name="variable_pricing" attrs="{'invisible': ['|','|',['rule_type','=','discount'],['dest_custom_price','!=','daily_rate'],['dest_product_group','=','access']]}">
                        <field name="dest_rental_pricing_ids" nolabel="1">
                            <tree editable="bottom">
                                <field name="duration" />
                                <field name="unit" />
                                <field name="price" />
                            </tree>
                        </field>
                    </group>
                    <group name="access_pricing" attrs="{'invisible': ['|','|',['rule_type','=','discount'],['dest_product_group','!=','access'],'&amp;',['dest_custom_price','!=','weekday_rate'],['dest_product_group','=','access']], 'required': ['&amp;',['dest_product_group','=','access'],['dest_custom_price','=','weekday_rate']]}">
                        <field name="dest_access_pricing_ids" nolabel="1">
                            <tree editable="bottom" decoration-danger="check == True">
                                <field name="sequence" widget="handle" />
                                <field name="access_weekday" />
                                <field name="access_time_start" string="Start" widget="float_time" />
                                <field name="access_time_end" string="End" widget="float_time" />
                                <field name="access_duration" string="Duration" widget="float_time" />
                                <field name="price" />
                                <field name="duration" widget="float_time" invisible="0" optional="hide" />
                                <field name="weekday_duration" widget="float_time" invisible="0" optional="hide" />
                                <field name="check" invisible="0" optional="hide" />
                            </tree>
                        </field>
                    </group>
                    <group name="weekday_pricing" attrs="{'invisible': ['|','|',['rule_type','=','discount'],['dest_custom_price','!=','weekday_rate'],['dest_product_group','=','access']]}">
                        <field name="dest_price_sunday" string="Price Sunday" />
                        <field name="dest_price_monday" string="Price Monday" />
                        <field name="dest_price_tuesday" string="Price Tuesday" />
                        <field name="dest_price_wednesday" string="Price Wednesday" />
                        <field name="dest_price_thursday" string="Price Thursday" />
                        <field name="dest_price_friday" string="Price Friday" />
                        <field name="dest_price_saturday" string="Price Saturday" />
                    </group>
                    <group name="fixed_pricing" attrs="{'invisible': ['|','|',['rule_type','=','discount'],'&amp;',['dest_custom_price','=','weekday_rate'],['dest_product_group','=','access'],'&amp;',['dest_custom_price','!=','fixed'],['dest_product_group','!=','access']]}">
                        <field name="list_price" />
                    </group>
                    <notebook>
                        <page string="Customers" attrs="{'invisible': [['customer_apply_on','!=','select']]}">
                            <field name="partner_ids" string="Customers">
                                <tree string="Customers">
                                    <field name="name" />
                                    <field name="has_active_membership" />
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>

                <div class="oe_chatter">
                    <field name="message_follower_ids" modifiers="{}" />
                    <field name="activity_ids" modifiers="{}" />
                    <field name="message_ids" modifiers="{}" />
                </div>

            </form>
        </field>
    </record>

    <record id="destination_guest_search_view" model="ir.ui.view">
        <field name="name">destination.guest.search.view</field>
        <field name="model">destination.guest</field>
        <field name="arch" type="xml">
            <search>
                <field name="guest_id" filter_domain="['|','|','|',('guest_name', 'ilike', self),('guest_phone', 'ilike', self),('guest_mobile', 'ilike', self),('guest_id_number', 'ilike', self)]" />
                <field name="member_id" />
                <field name="dest_id" />
                <field name="product_id" />
                <field name="access_code" />
                <field name="name" />
                
                <filter string="Today" name="my_today" domain="['|',('access_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0))),('expiry_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59))),('expiry_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0))),('access_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59)))]" />
                <separator/>
                <filter string="Registered" name="filter_new" domain="[('state','=', 'new')]" />
                <filter string="Pending" name="filter_pending" domain="[('state','=', 'pending')]" />
                <filter string="In-Process" name="filter_inprocess" domain="[('state','=', 'inprocess')]" />
                <filter string="Checked-In" name="filter_in" domain="[('state','=', 'checked-in')]" />
                <filter string="Checked-Out" name="filter_out" domain="[('state','=', 'checked-out')]" />
                <filter string="Late" name="filter_late" domain="[('state','=', 'late')]" />
                <filter string="Expired" name="filter_expired" domain="[('state','=', 'expired')]" />
                <filter string="Done" name="filter_done" domain="[('state','=', 'done')]" />
                <filter string="Cancel" name="filter_cancel" domain="[('state','=', 'cancel')]" />
                <separator/>
                <filter string="Pending Credit" name="filter_pending_credit" domain="[('invoice_ids','!=', False),('unit_price','&gt;',0),('access_payment_method_id','=',False),('state','!=','done')]" />
                <separator/>
                <group name="guests_group_by">
                    <filter name="group_dest_id" string="Entity" context="{'group_by': 'dest_id'}" />
                    <filter name="group_member_id" string="Member" context="{'group_by': 'member_id'}" />
                    <filter name="group_product_id" string="Product" context="{'group_by': 'product_id'}" />
                    <filter name="group_state" string="Status" context="{'group_by': 'state'}" />
                    <filter name="group_date_month" string="Access Date" context="{'group_by': 'access_date:month'}"/>
                    <filter name="group_date_day" invisible="1" string="Access Date" context="{'group_by': 'access_date:day'}"/>
                </group>

            </search>
        </field>
    </record>


    <record id="destination_guest_kanban_view" model="ir.ui.view">
        <field name="name">destination.guest.kanban.view</field>
        <field name="model">destination.guest</field>
        <field name="priority">0</field>
        <field name="arch" type="xml">
            <kanban string="Guest List" records_draggable="0"  group_create="0" group_delete="0" group_edit="0" archivable="0" quick_create="0"  create="false" >
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_record_top mb-0">
                                <div class="o_kanban_record_headings">
                                    <strong class="o_kanban_record_title">
                                        <field name="guest_id" display="full" on_change="1" />
                                    </strong>
                                </div>
                                <field name="unit_price" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'invisible': ['|',['token_type','!=','guest'],['unit_price','=',0]]}" />
                            </div>

                            <div class="o_kanban_card_content">
                                <div>
                                    <field name="product_id" />
                                </div>
                                <div style="color:green">
                                    <field name="access_date" />
                                </div>
                                <div style="color:red">
                                    <field name="expiry_date" />
                                </div>
                                <field name="token_type" invisible="1" />
                                <field name="currency_id" invisible="1" />
                            </div>
                            
                        </div>
                    </t>
                </templates>
            </kanban>

        </field>
    </record>

    <record id="destination_guest_process_kanban_view" model="ir.ui.view">
        <field name="name">destination.guest.process.kanban.view</field>
        <field name="model">destination.guest</field>
        <field name="arch" type="xml">
            <kanban string="Guest List" records_draggable="0"  group_create="0" group_delete="0" group_edit="0" archivable="0" quick_create="0"  create="false" >
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_record_top mb-0">
                                <div class="o_kanban_record_headings">
                                    <strong class="o_kanban_record_title">
                                        <field name="guest_id" display="full" on_change="1" />
                                    </strong>
                                </div>
                                <field name="unit_price" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'invisible': ['|',['token_type','!=','guest'],['unit_price','=',0]]}" />
                            </div>

                            <div class="o_kanban_card_content">
                                <div>
                                    <field name="product_id" />
                                </div>
                                <div style="color:green">
                                    <field name="access_date" />
                                </div>
                                <div style="color:red">
                                    <field name="expiry_date" />
                                </div>
                                <field name="token_type" invisible="1" />
                                <field name="currency_id" invisible="1" />
                            </div>
                            <div class="oe_module_action">
                                <br />
                                <button type="object" class="btn btn-primary btn-sm" name="process_guest" context="{'default_guest_id':active_id}">Process</button>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>

        </field>
    </record>

    <record id="destination_guest_checkin_kanban_view" model="ir.ui.view">
        <field name="name">destination.guest.checkin.kanban.view</field>
        <field name="model">destination.guest</field>
        <field name="arch" type="xml">
            <kanban  records_draggable="0"  group_create="0" group_delete="0" group_edit="0" archivable="0" quick_create="0"  string="Guest List" create="false" >
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_record_top mb-0">
                                <div class="o_kanban_record_headings">
                                    <strong class="o_kanban_record_title">
                                        <field name="guest_id" display="full" on_change="1" />
                                    </strong>
                                </div>
                                <field name="unit_price" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'invisible': ['|',['token_type','!=','guest'],['unit_price','=',0]]}" />
                            </div>

                            <div class="o_kanban_card_content">
                                <div>
                                    <field name="product_id" />
                                </div>
                                <div style="color:green">
                                    <field name="access_date" />
                                </div>
                                <div style="color:red">
                                    <field name="expiry_date" />
                                </div>
                                <field name="token_type" invisible="1" />
                                <field name="currency_id" invisible="1" />
                            </div>
                            <div class="oe_module_action">
                                <br />
                                <button type="object" class="btn btn-primary btn-sm" name="checkin_guest" context="{'default_guest_id':active_id}">Check-In</button>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="destination_guest_checkout_kanban_view" model="ir.ui.view">
        <field name="name">destination.guest.checkout.kanban.view</field>
        <field name="model">destination.guest</field>
        <field name="arch" type="xml">
            <kanban string="Guest List" records_draggable="0"  group_create="0" group_delete="0" group_edit="0" archivable="0" quick_create="0" create="false">
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_record_top mb-0">
                                <div class="o_kanban_record_headings">
                                    <strong class="o_kanban_record_title">
                                        <field name="guest_id" display="full" on_change="1" />
                                    </strong>
                                </div>
                                <field name="unit_price" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'invisible': ['|',['token_type','!=','guest'],['unit_price','=',0]]}" />
                            </div>

                            <div class="o_kanban_card_content">
                                <div>
                                    <field name="product_id" />
                                </div>
                                <div style="color:green">
                                    <field name="access_date" />
                                </div>
                                <div style="color:red">
                                    <field name="expiry_date" />
                                </div>
                                <field name="token_type" invisible="1" />
                                <field name="currency_id" invisible="1" />
                            </div>
                            <div class="oe_module_action">
                                <br />
                                <button type="object" class="btn btn-primary btn-sm" name="checkout_guest" context="{'default_guest_id':active_id}">Check-Out</button>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>

        </field>
    </record>

    
    
    
    
    <record id="destination_access_code_list_view" model="ir.ui.view">
        <field name="name">destination.access.code.list.view</field>
        <field name="model">destination.access.code</field>
        <field name="arch" type="xml">
            <tree>
                <field name="dest_id" widget="selection" required="1" />
                <field name="name" />
                <field name="code_letter" />
                <field name="code_number" />
                <field name="is_used" />
                <field name="link_date" />
                <field name="source_document" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
            </tree>
        </field>
    </record>

    <record id="destination_access_code_form_view" model="ir.ui.view">
        <field name="name">destination.access.code.form.view</field>
        <field name="model">destination.access.code</field>
        <field name="arch" type="xml">
            <form duplicate="0">
                <sheet string="Access Token Codes">
                    <group>
                        <field name="dest_id" widget="selection" required="1" />
                        <field name="name" readonly="1" />
                        <field name="code_letter" />
                        <field name="code_number" />
                        <field name="source_document" readonly="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                        <field name="is_used" readonly="1" />
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" modifiers="{}" />
                    <field name="activity_ids" modifiers="{}" />
                    <field name="message_ids" modifiers="{}" />
                </div>
            </form>
        </field>
    </record>


    <record id="destination_membership_access_code_wizard_form_view" model="ir.ui.view">
        <field name="name">destination.access.code.wizard.form.view</field>
        <field name="model">destination.access.code.wizard</field>
        <field name="arch" type="xml">
            <form delete="false" duplicate="0">
                <sheet>
                    <group>
                        <field name="dest_id" widget="selection" required="1" />
                        <field name="code_letter" />
                        <field name="code_number_from" />
                        <field name="code_number_to" />
                        <field name="user_ids" invisible="1" />
                        <field name="manager_ids" invisible="1" />
                    </group>
                    <footer>
                        <button name="apply" string="Generate" type="object" class="btn-primary" data-hotkey="q" />
                        <button string="Cancel" class="btn-secondary" special="cancel" data-hotkey="z" />
                    </footer>
                </sheet>
            </form>
        </field>
    </record>


    <record id="destination_membership_access_code_process_wizard_form_view" model="ir.ui.view">
        <field name="name">destination.access.code.process.wizard.form.view</field>
        <field name="model">destination.access.code.process.wizard</field>
        <field name="arch" type="xml">
            <form delete="false">
                <sheet>
                    <group>
                        <field name="is_manager" invisible="1"/>
                        <field name="access_products_ids" widget="many2many_tags" invisible="1"/>
                        <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                        <field name="pricerule_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'readonly':[['is_forced_pricerule','=',True]]}" />
                        <field name="is_forced_pricerule" invisible="1" />
                        <field name="is_payment" widget="boolean_toggle" />
                        <field name="access_payment_method_id" widget="radio" attrs="{'invisible': [['is_payment','=',False]]}" />
                        <field name="access_payment_method_ids" invisible="1" />
                        <field name="guest_id" invisible="1"/>
                        <field name="guest_gender" invisible="1"/>
                        <field name="is_male" invisible="1"/>
                        <field name="is_female" invisible="1"/>
                        <label for="guest_id"/>
                        <div class="o_row">
                            <span class="fa fa-mars" style="color:blue; font-weight: 900;" role="img" aria-label="Male" title="Male" attrs="{'invisible':[['guest_gender','in',['female',False]]]}"></span>
                            <span class="fa fa-venus" style="color:pink; font-weight: 900;" role="img" aria-label="Female" title="Female" attrs="{'invisible':[['guest_gender','in',['male',False]]]}"></span>
                            <field name="guest_name" nolabel="1" class="oe_inline" on_change="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" readonly="1"  />
                        </div>
                        <field name="guest_id_number" invisible="0"/>
                        <field name="guest_mobile" invisible="0"/>
                       
                        
                        <field name="access_date" attrs="{'readonly': [['is_manager','=',False]]}" force_save="1" style="color:green" />
                        <field name="expiry_date" readonly="1" force_save="1" style="color:red" />


                        <field name="member_id" readonly="1" invisible="1" />
                        <field name="dest_id" widget="selection" readonly="1" invisible="1" />
                        <field name="membership_id" readonly="1" invisible="1" />

                        <field name="access_date_date" invisible="1" />
                        <field name="access_date_month" invisible="1" />
                        <field name="access_date_weekday" invisible="1" />
                        <field name="access_date_time" invisible="1" />

                    </group>
                    <group class="oe_right">
                        <field name="token_type" nolabel="1" readonly="1" style="color:red" class="oe_right" attrs="{'invisible': [['token_type','=','guest']]}" />
                    </group>
                    <group class="oe_right">
                        <label for="unit_price" class="oe_right" attrs="{'invisible': ['|',['token_type','=','free'],['unit_price','=',0]]}" />
                        <field name="unit_price" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" force_save="1" style="font-size: 24px; font-weight: bold;" class="oe_right" attrs="{'invisible': ['|',['token_type','=','free'],['unit_price','=',0]]}" />
                        <field name="currency_id" invisible="1" />
                    </group>

                    <footer>
                        <button name="apply" string="Process-In" type="object" class="btn-primary" data-hotkey="q" />
                        <button string="Cancel" class="btn-secondary" special="cancel" data-hotkey="z" />
                    </footer>
                </sheet>
            </form>
        </field>
    </record>


    <record id="destination_membership_access_code_checkin_wizard_form_view" model="ir.ui.view">
        <field name="name">destination.access.code.checkin.wizard.form.view</field>
        <field name="model">destination.access.code.checkin.wizard</field>
        <field name="arch" type="xml">
            <form delete="false">
                <sheet>
                    <group>
                        <field name="is_manager" invisible="1"/>
                        <field name="access_product_code_required" invisible="1"/>
                        <field name="access_code" attrs="{'readonly': [['access_function','=','out']], 'required': [['access_product_code_required','=',True]], 'invisible': [['access_product_code_required','=',False]]}" force_save="1" />
                        <field name="access_function" invisible="1" />
                        <field name="guest_id" invisible="1"/>
                        <field name="guest_gender" invisible="1"/>
                        <field name="is_male" invisible="1"/>
                        <field name="is_female" invisible="1"/>
                        <label for="guest_id"/>
                        <div class="o_row">
                            <span class="fa fa-mars" style="color:blue; font-weight: 900;" role="img" aria-label="Male" title="Male" attrs="{'invisible':[['guest_gender','in',['female',False]]]}"></span>
                            <span class="fa fa-venus" style="color:pink; font-weight: 900;" role="img" aria-label="Female" title="Female" attrs="{'invisible':[['guest_gender','in',['male',False]]]}"></span>
                            <field name="guest_name" nolabel="1" class="oe_inline" on_change="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" readonly="1"  />
                        </div>
                        <field name="guest_id_number" invisible="0"/>
                        <field name="guest_mobile" invisible="0"/>
                        
                        <field name="product_id" readonly="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                        <field name="pricerule_id" readonly="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                        <field name="is_forced_pricerule" invisible="1" />
                        <field name="access_date" string="Date/Time" attrs="{'readonly': [['is_manager','=',False]]}" force_save="1" style="color:green" />
                        <field name="expiry_date" readonly="1" force_save="1" style="color:red" />
                        <field name="member_id" readonly="1" invisible="0" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                        <field name="dest_id" widget="selection" readonly="1" invisible="1" />
                        <field name="membership_id" readonly="1" invisible="1" />
                        <field name="access_date_date" invisible="1" />
                        <field name="access_date_month" invisible="1" />
                        <field name="access_date_weekday" invisible="1" />
                        <field name="access_date_time" invisible="1" />
                    </group>
                    <group class="oe_right">
                        <field name="token_type" nolabel="1" readonly="1" style="color:red" class="oe_right" attrs="{'invisible': [['token_type','=','guest']]}" />
                    </group>
                    <group class="oe_right">
                        <label for="unit_price" class="oe_right" attrs="{'invisible': ['|',['token_type','=','free'],['unit_price','=',0]]}" />
                        <field name="unit_price" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" force_save="1" style="font-size: 24px; font-weight: bold;" class="oe_right" attrs="{'invisible': ['|',['token_type','=','free'],['unit_price','=',0]]}" />
                        <field name="currency_id" invisible="1" />
                    </group>
                    <footer>
                        <button name="apply" string="Validate" type="object" class="btn-primary" data-hotkey="q" />
                        <button string="Cancel" class="btn-secondary" special="cancel" data-hotkey="z" />
                    </footer>
                </sheet>
            </form>
        </field>
    </record>


    <record id="destination_payment_method_list_view" model="ir.ui.view">
        <field name="name">destination.payment.method.list.view</field>
        <field name="model">destination.payment.method</field>
        <field name="arch" type="xml">
            <tree>
                <field name="sequence" optional="show" widget="handle" />
                <field name="name" />
                <field name="journal_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                <field name="company_id" invisible="1" />
            </tree>
        </field>
    </record>

    <record id="destination_payment_method_form_view" model="ir.ui.view">
        <field name="name">destination.payment.method.form.view</field>
        <field name="model">destination.payment.method</field>
        <field name="arch" type="xml">
            <form duplicate="0">
                <sheet>
                    <group>
                        <field name="name" />
                        <field name="journal_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                        <field name="company_id" invisible="1" />
                        <field name="note" />
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" modifiers="{}" />
                    <field name="activity_ids" modifiers="{}" />
                    <field name="message_ids" modifiers="{}" />
                </div>
            </form>
        </field>
    </record>

    <record id="destination_note_list_view" model="ir.ui.view">
        <field name="name">destination.note.list.view</field>
        <field name="model">destination.note</field>
        <field name="arch" type="xml">
            <tree>
                <field name="sequence" optional="show" widget="handle" />
                <field name="name" />
                <field name="note" />
            </tree>
        </field>
    </record>

    <record id="destination_note_form_view" model="ir.ui.view">
        <field name="name">destination.note.form.view</field>
        <field name="model">destination.note</field>
        <field name="arch" type="xml">
            <form duplicate="0">
                <sheet>
                    <group>
                        <field name="name" />
                        <field name="note" />
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" modifiers="{}" />
                    <field name="activity_ids" modifiers="{}" />
                    <field name="message_ids" modifiers="{}" />
                </div>
            </form>
        </field>
    </record>

    <record id="destination_partner_wizard_form_view" model="ir.ui.view">
        <field name="name">destination.partner.wizard.form.view</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <form duplicate="0">
                <sheet>
                    <field name="image_1920" widget="image" class="oe_avatar" options="{&quot;preview_image&quot;: &quot;avatar_128&quot;}" on_change="1" modifiers="{}" />
                    <div class="oe_title mb24">

                        <h1>
                            <field id="individual" class="o_text_overflow" name="name" default_focus="1" placeholder="e.g. Brandom Freeman" required="1" />
                        </h1>

                    </div>
                    <group>

                        <field name="partnergender" widget="radio" />
                        <field name="id_number" />
                        <field name="mobile" widget="phone"  />
                        <field name="phone" widget="phone"  />
                        <field name="email" widget="email"  />
                        
                    </group>


                </sheet>
            </form>
        </field>
    </record>

    <record id="destination_membership_member_process_kanban_view" model="ir.ui.view">
        <field name="name">destination.membership.member.process.kanban.view</field>
        <field name="model">destination.membership.member</field>
        <field name="arch" type="xml">
            <kanban records_draggable="0"  group_create="0" group_delete="0" group_edit="0" archivable="0" quick_create="0" create="0" edit="0" sample="1">
                <field name="id" />
                <field name="partner_id" />
                <field name="dest_id" />
                <field name="membership_id" />
                <field name="product_id" />
                <field name="membership_type" />

                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_card">
                            <div class="o_kanban_record_top mb16">
                                <div class="o_kanban_record_headings mt4">
                                    <strong class="o_kanban_record_title">
                                        <span>
                                            <field name="member_name" on_change="1" modifiers="{&quot;readonly&quot;: true}" />
                                        </span>
                                    </strong>
                                </div>
                                <div style="margin:auto; vertical-align:middle">
                                    <div class="float-right" t-if="record.member_access_status.raw_value == 'inprocess'" name="state_inprocess">
                                        <span class="fa fa-circle text-warning" role="img" aria-label="In-Process" title="In-Process" name="member_access_status"></span>
                                    </div>
                                    <div class="float-right" t-if="record.member_access_status.raw_value == 'checked-in' and record.is_access_late.raw_value == 0" name="state_checkedin">
                                        <span class="fa fa-circle text-success" role="img" aria-label="Checked-In" title="Checked-In" name="member_access_status"></span>
                                    </div>
                                    <div class="float-right" t-if="record.is_access_late.raw_value == 1" name="state_late">
                                        <span class="fa fa-circle text-danger" role="img" aria-label="Late" title="Late" name="member_access_status"></span>
                                    </div>
                                    <div class="float-right" t-if="record.member_access_status.raw_value == 'checked-out'" name="state_checkedout">
                                        <span class="fa fa-circle-o text-muted" role="img" aria-label="Checked-Out" title="Checked-Out" name="member_access_status"></span>
                                    </div>
                                    
                                    <div class="float-right" t-if="record.access_permission.raw_value == 0 and record.membership_type.raw_value == 'guest'" name="guest_mode">
                                        <span class="fa fa-user-plus ml-1 mr-1" style="color: #bf00ff" role="img" aria-label="Guest" title="Guest" name="access_guest"></span>
                                    </div>
                                    
                                    <div class="float-right" t-if="record.access_permission.raw_value == 1 and record.membership_type.raw_value != 'guest'" name="state_allowed">
                                        <span class="fa fa-calendar-times-o ml-1 mr-1" style="color: WhiteSmoke" role="img" aria-label="Inaccessible" title="Inaccessible" name="access_permission"></span>
                                    </div>
                                    <div class="float-right" t-if="record.access_permission.raw_value == 0 and record.membership_type.raw_value != 'guest'" name="state_not_allowed">
                                        <span class="fa fa-calendar-times-o ml-1 mr-1" style="color: #bf00ff" role="img" aria-label="Inaccessible" title="Inaccessible" name="access_permission"></span>
                                    </div>
                                    <div class="float-right" t-if="record.is_blacklist.raw_value == 1" name="state_blacklist">
                                        <div class="pl-1 pr-1 ml-1 mr-1" style="background-color: black !important; color:white !important; border-radius:100px">Blacklist</div>
                                    </div>

                                </div>
                            </div>
                            <div class="o_kanban_record_bottom">
                                <div class="oe_kanban_bottom_left text-muted">
                                    <span>
                                        <field name="dest_product" />
                                        <field name="member_access_status" invisible="1" />
                                        <field name="is_blacklist" invisible="1" />
                                        <field name="is_access_late" invisible="1" />
                                        <field name="access_permission" invisible="1" />
                                    </span>
                                </div>
                                <div class="oe_kanban_bottom_right">
                                    <button type="object" class="btn btn-primary btn-sm" name="checkin_member" context="{'default_member_id':active_id}" attrs="{'invisible': ['|','|','|',['membership_type','=','guest'],['is_blacklist','=',True],['member_access_status','in',['checked-in','inprocess']],'&amp;',['member_access_status','=','checked-out'],['access_permission','=',False]]}">Check-In</button>
                                    <button type="object" class="btn btn-primary btn-sm" name="checkin_counter_member" context="{'default_member_id':active_id}" attrs="{'invisible': ['|',['is_blacklist','=',True],['member_access_status','!=','inprocess']]}">Check-In</button>
                                    <button type="object" class="btn btn-primary btn-sm" name="processin_member" context="{'default_member_id':active_id}" attrs="{'invisible': ['|','|',['is_blacklist','=',True],['member_access_status','in',['inprocess','checked-in']],['access_permission','=',True]]}">Process-In</button>
                                    <button type="object" class="btn btn-primary btn-sm" name="checkout_member" context="{'default_member_id':active_id}" attrs="{'invisible': [['member_access_status','in',['checked-out','inprocess']]]}">Check-Out</button>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
    
    
    
    
    <record id="destination_membership_member_activity_wizard_form_view" model="ir.ui.view">
        <field name="name">destination.membership.member.activity.wizard.form.view</field>
        <field name="model">destination.membership.member.activity.wizard</field>
        <field name="arch" type="xml">
            <form delete="false" duplicate="0">
                <sheet>
                    <group>
                        <field name="access_function" invisible="1" />
                        <field name="is_manager" invisible="1"/>
                        <field name="access_products_ids" widget="many2many_tags" invisible="1"/>
                        <field name="access_code" attrs="{'invisible': [['access_function','!=','check-in-counter']], 'required': [['access_function','=','check-in-counter']]}" />
                        
                        
                        
                        <field name="member_gender" invisible="1"/>
                        <field name="is_male" invisible="1"/>
                        <field name="is_female" invisible="1"/>
                        <label for="member_id"/>
                        <div class="o_row">
                            <span class="fa fa-mars" style="color:blue; font-weight: 900;" role="img" aria-label="Male" title="Male" attrs="{'invisible':[['member_gender','in',['female',False]]]}"></span>
                            <span class="fa fa-venus" style="color:pink; font-weight: 900;" role="img" aria-label="Female" title="Female" attrs="{'invisible':[['member_gender','in',['male',False]]]}"></span>
                            <field name="member_id" class="oe_inline" on_change="1" nolabel="1" readonly="1" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" />
                        </div>
                        <field name="member_id_number" invisible="0"/>
                        <field name="member_mobile" invisible="0"/>
                        
                        
                        <field name="product_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'invisible': ['|',['access_function','!=','process-in'],['membership_access_weekdays_allowed','=',True]], 'required': [['access_function','=','process-in']]}" />
                        <field name="pricerule_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False, 'no_open': True}" attrs="{'invisible': ['|',['access_function','!=','process-in'],['membership_access_weekdays_allowed','=',True]], 'readonly':['|',['is_forced_pricerule','=',True],['is_manager','=',False]]}" />
                        <field name="is_payment" widget="boolean_toggle" attrs="{'invisible': ['|',['access_function','!=','process-in'],['membership_access_weekdays_allowed','=',True]]}" />
                        <field name="access_payment_method_id" widget="radio" attrs="{'invisible': ['|','|',['is_payment','=',False],['membership_access_weekdays_allowed','=',True],['access_function','!=','process-in']]}" />
                        <field name="access_payment_method_ids" invisible="1" />

                        <field name="is_forced_pricerule" invisible="1" />
                        <field name="access_date" attrs="{'readonly': [['is_manager','=',False]]}" force_save="1" style="color:green" />
                        <field name="expiry_date" readonly="1" force_save="1" style="color:red" attrs="{'invisible': ['|',['access_function','!=','process-in'],['membership_access_weekdays_allowed','=',True]]}" />
                        <field name="dest_id" widget="selection" readonly="1" invisible="1" />

                        <field name="membership_id" readonly="1" invisible="1" />
                        <field name="access_date_date" invisible="1" />
                        <field name="access_date_month" invisible="1" />
                        <field name="access_date_weekday" invisible="1" />
                        <field name="access_date_time" invisible="1" />
                    </group>
                    <group class="oe_right">
                        <field name="membership_access_weekdays_allowed" invisible="1" />
                    </group>
                    <group class="oe_right" attrs="{'invisible': ['|',['access_function','!=','process-in'],['membership_access_weekdays_allowed','=',True]]}">
                        <label for="unit_price" class="oe_right" />
                        <field name="unit_price" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" force_save="1" style="font-size: 24px; font-weight: bold;" class="oe_right" />
                        <field name="currency_id" invisible="1" />
                    </group>
                    <footer>
                        <button name="member_check_in" string="Check-In" type="object" class="btn-primary" data-hotkey="q" attrs="{'invisible': [['access_function','!=','check-in']]}" />
                        <button name="member_check_in_counter" string="Check-In" type="object" class="btn-primary" data-hotkey="q" attrs="{'invisible': [['access_function','!=','check-in-counter']]}" />
                        <button name="member_process_in" string="Process" type="object" class="btn-primary" data-hotkey="q" attrs="{'invisible': [['access_function','!=','process-in']]}" />
                        <button name="member_check_out" string="Check-Out" type="object" class="btn-primary" data-hotkey="q" attrs="{'invisible': [['access_function','!=','check-out']]}" />
                        <button string="Cancel" class="btn-secondary" special="cancel" data-hotkey="z" />
                    </footer>
                </sheet>
            </form>
        </field>
    </record>


    <record id="destination_membership_member_activity_list_view" model="ir.ui.view">
        <field name="name">destination.membership.member.activity.list.view</field>
        <field name="model">destination.membership.member.activity</field>
        <field name="arch" type="xml">
            <tree expand="1" create="0" edit="0">
                <field name="name" optional="hide" />
                <field name="dest_id" required="1" widget="selection" optional="hide" />
                <field name="member_id" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                <field name="processin_date" />
                <field name="checkin_date" />
                <field name="checkout_date" />
                <field name="expiry_date" />
                <field name="is_late" widget="badge" decoration-danger="is_late == 'Late'" />
                <field name="product_id" optional="hide" options="{'no_create_edit': True, 'no_create': True, 'quick_create': False}" />
                <field name="unit_price" readonly="1" force_save="1" />
                <field name="access_code" optional="hide" readonly="1" />
            </tree>
        </field>
    </record>
    
    <record id="destination_membership_member_activity_search_view" model="ir.ui.view">
        <field name="name">destination.membership.member.activity.search.view</field>
        <field name="model">destination.membership.member.activity</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
                <field name="member_id" />
                <field name="dest_id" />
                <field name="product_id" />
                <field name="membership_id" />
                <field name="access_code" />
                
                
                <filter string="Today" name="my_today" domain="['|',('access_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0))),('expiry_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59))),('expiry_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0))),('access_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59)))]" />
                <separator/>
                <filter string="Processed-In" name="filter_processed" domain="['&amp;',('processin_date','!=', False),('checkin_date','=', False)]" />
                <filter string="Checked-In" name="filter_checkedin" domain="['&amp;',('checkin_date','!=', False),('checkout_date','=', False)]" />
                <filter string="Checked-Out" name="filter_checkedout" domain="[('checkout_date','!=', False)]" />
                <separator/>
                
                <group name="guests_group_by">
                    <filter name="group_dest_id" string="Entity" context="{'group_by': 'dest_id'}" />
                    <filter name="group_member_id" string="Member" context="{'group_by': 'member_id'}" />
                    <filter name="group_product_id" string="Product" context="{'group_by': 'product_id'}" />
                </group>
                
            </search>
        </field>
    </record>


    <record id="destination_membership_member_activity_form_view" model="ir.ui.view">
        <field name="name">destination.membership.member.activity.form.view</field>
        <field name="model">destination.membership.member.activity</field>
        <field name="arch" type="xml">
            <form edit="0" create="0" duplicate="0">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_invoice" type="object" class="oe_stat_button" icon="fa-pencil-square-o" attrs="{'invisible': [('invoice_count', '=', 0)]}" modifiers="{&quot;invisible&quot;: [[&quot;invoice_count&quot;, &quot;=&quot;, 0]]}">
                            <field name="invoice_count" invisible="1" />
                            <field name="currency_id" invisible="1" />
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="total_invoiced" widget="monetary" modifiers="{&quot;readonly&quot;: true}" options="{'currency_field': 'currency_id'}" />
                                </span>
                                <span class="o_stat_text">Invoiced</span>
                            </div>
                        </button>
                        <button name="action_view_invoice" type="object" class="oe_stat_button" icon="fa-pencil-square-o" attrs="{'invisible': [('total_due', '=', 0)]}" modifiers="{&quot;invisible&quot;: [[&quot;total_due&quot;, &quot;=&quot;, 0]]}">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="total_due" widget="monetary" modifiers="{&quot;readonly&quot;: true}" options="{'currency_field': 'currency_id'}" />
                                </span>
                                <span class="o_stat_text">Due</span>
                            </div>
                        </button>
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1" modifiers="{'readonly': true, 'required': true}" />
                        </h1>
                    </div>
                    <group>
                        <group name="access_details" string="Access Details">
                            <field name="dest_id" widget="selection" readonly="1" />

                            <field name="access_date" readonly="1" />
                            <field name="member_id" readonly="1" />
                            <field name="product_id" readonly="1" />

                            <field name="pricerule_id" readonly="1" />
                            <field name="is_forced_pricerule" invisible="1" />

                            <field name="company_id" invisible="1" />
                            <field name="access_sales_journal_id" invisible="1" />

                            <field name="access_date_date" invisible="1" />
                            <field name="access_date_month" invisible="1" />
                            <field name="access_date_weekday" invisible="1" />
                            <field name="access_date_time" invisible="1" />

                            <field name="membership_id" invisible="1" />
                            <field name="is_manager" invisible="1" />


                        </group>
                        <group name="access_token" string="Access Token">
                            <field name="unit_price" readonly="1" />
                            <field name="expiry_date" readonly="0" string="Token Expiry" />
                            <field name="access_code" readonly="1" />
                            <field name="is_late" readonly="0" invisible="0" />
                        </group>
                        <group name="notes" string="Remarks">
                            <field name="access_exceptions" readonly="1" />
                            <field name="note" readonly="1" invisible="0" />
                        </group>
                        <group name="time_log" string="Token Time Log">
                            <field name="create_date" readonly="1" force_save="1" string="Create" />
                            <field name="processin_date" readonly="1" force_save="1" string="Process" />
                            <field name="checkin_date" readonly="1" force_save="1" string="Check-In" />
                            <field name="expiry_date" string="Expire" />
                            <field name="checkout_date" readonly="1" force_save="1" string="Check-Out" />
                            <field name="close_date" readonly="1" force_save="1" string="Close" />
                        </group>

                    </group>


                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" modifiers="{}" />
                    <field name="activity_ids" modifiers="{}" />
                    <field name="message_ids" modifiers="{}" />
                </div>

            </form>
        </field>
    </record>
    <!--
    <record id="destination_membership_member_process_search_view" model="ir.ui.view">
        <field name="name">destination.membership.member.process.search.view</field>
        <field name="model">destination.membership.member</field>
        <field name="arch" type="xml">
            <search>
                <field name="partner_id" filter_domain="['|','|','|',('member_name', 'ilike', self),('member_phone', 'ilike', self),('member_mobile', 'ilike', self),('member_id_number', 'ilike', self)]"/>
                <field name="dest_id"/>
                <field name="product_id"/>
                <field name="name"/>
                <group name="guests_group_by">
                    <filter name="dest_id" string="Entity" context="{'group_by': 'dest_id'}"/>
                    <filter name="product_id" string="Product" context="{'group_by': 'product_id'}"/>
                    <filter name="state" string="Status" context="{'group_by': 'state'}"/>
                </group>
                
            </search>
        </field>
    </record>
    -->

    <record id="destination_membership_calendar_view" model="ir.ui.view">
        <field name="name">destination.membership.calendar.view</field>
        <field name="model">destination.membership</field>
        <field name="arch" type="xml">

            <calendar date_start="dest_checkin_time" date_stop="dest_checkout_time" string="Product Calendar" color="state" create_name_field="product_id_code" mode="year" quick_add="false"></calendar>
        </field>
    </record>


    <record id="destination_product_report_graph_view" model="ir.ui.view">
        <field name="name">destination.product.report.graph.view</field>
        <field name="model">destination.product.report</field>
        <field name="arch" type="xml">

            <graph string="Rental Analysis" type="bar" sample="1" disable_linking="1">
                <field name="product_id" />
                <field name="rental_status" />
                <field name="total_occupancy_rate" string="Occupancy Rate" type="measure" />

            </graph>


        </field>
    </record>

    <record id="destination_product_report_pivot_view" model="ir.ui.view">
        <field name="name">destination.product.report.pivot.view</field>
        <field name="model">destination.product.report</field>
        <field name="arch" type="xml">

            <pivot string="Rental Analysis" sample="1">
                <field name="product_id" type="row" />


                <field name="rental_status" type="col" />
                <field name="total_membership_count" string="Count" type="measure" />
                <field name="total_occupancy_rate" string="Occupancy %" type="measure" />
                <field name="total_days_occupied" string="Days" type="measure" />
                <field name="total_average_per_day" string="$$/Day" type="measure" />
                <field name="total_average_per_count" string="$$/Count" type="measure" />
                <field name="total_amount_total" string="$$" type="measure" />
            </pivot>

        </field>
    </record>


    <record id="destination_product_report_dashboard_view" model="ir.ui.view">
        <field name="name">destination.product.report.dashboard.view</field>
        <field name="model">destination.product.report</field>
        <field name="arch" type="xml">

            <dashboard sample="1">
                <view type="graph" ref="destinations.destination_product_report_graph_view" />

                <group>
                    <aggregate name="membership_count" string="Count" field="membership_count" />
                    <aggregate name="amount_total" string="$$" field="amount_total" />
                    <aggregate name="days_occupied" string="Days Occupied" field="days_occupied" />
                    <aggregate name="occupancy_rate" string="Occupancy %" field="occupancy_rate" />
                </group>
                <group>
                    <aggregate name="total_membership_count" string="Projected Count" field="total_membership_count" />
                    <aggregate name="total_amount_total" string="Projected $$" field="total_amount_total" />
                    <aggregate name="total_days_occupied" string="Days Occupied" field="total_days_occupied" />
                    <aggregate name="total_occupancy_rate" string="Projected Occupancy %" field="total_occupancy_rate" />
                </group>
                <view type="pivot" ref="destinations.destination_product_report_pivot_view" />
            </dashboard>


        </field>
    </record>


    <record id="destination_product_report_wizard_form_view" model="ir.ui.view">
        <field name="name">destination.product.report.wizard.form.view</field>
        <field name="model">destination.product.report.wizard</field>
        <field name="arch" type="xml">
            <form delete="false" duplicate="0">
                <sheet>
                    <group>
                        <label for="start_date" string="Date" />
                        <div class="o_row">
                            <field name="start_date" widget="daterange" nolabel="1" class="oe_inline" options="{'related_end_date': 'end_date'}" />
                            <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow" />
                            <field name="end_date" widget="daterange" nolabel="1" class="oe_inline" options="{'related_start_date': 'start_date'}" />
                        </div>

                    </group>
                    <footer>
                        <button name="generate_rental_report" string="Generate Report" type="object" class="btn-primary" data-hotkey="q" />
                        <button string="Cancel" class="btn-secondary" special="cancel" data-hotkey="z" />
                    </footer>
                </sheet>
            </form>
        </field>
    </record>

    <record id="destination_product_report_search_view" model="ir.ui.view">
        <field name="name">destination.product.report.search.view</field>
        <field name="model">destination.product.report</field>
        <field name="arch" type="xml">
            <search>

                <field name="product_id" />

                <group name="memberships_group_by">
                    <filter name="destination" string="Entity" context="{'group_by': 'dest_id'}" />
                    <filter name="product_id" string="Product" context="{'group_by': 'product_id'}" />
                    <filter name="product_categ_id" string="Product Category" context="{'group_by': 'product_categ_id'}" />
                    <filter name="dest_product_group" string="Product Group" context="{'group_by': 'dest_product_group'}" />
                    <filter name="dest_custom_price" string="Product Pricing" context="{'group_by': 'dest_custom_price'}" />
                    <filter name="rental_status" string="Rental Status" context="{'group_by': 'rental_status'}" />
                </group>
                <filter string="Actual" name="actual" domain="[('rental_status', '=', 'actual')]" />
                <filter string="Planned" name="planned" domain="[('rental_status', '=', 'plan')]" />
                <separator />
                <filter string="Rentals" name="accommodation" domain="[('dest_product_group', '=', 'accommodation')]" />
                <filter string="Memberships" name="membership" domain="[('dest_product_group', '=', 'membership')]" />
                <separator />
                <filter string="Variable Weekday Rate" name="weekday_rate" domain="[('dest_custom_price', '=', 'weekday_rate')]" />
                <filter string="Variable Daily Rate" name="daily_rate" domain="[('dest_custom_price', '=', 'daily_rate')]" />
                <filter string="Fixed Rate" name="fixed" domain="[('dest_custom_price', '=', 'fixed')]" />

            </search>
        </field>
    </record>

    <record id="destination_membership_report_search_view" model="ir.ui.view">
        <field name="name">destination.membership.report.search.view</field>
        <field name="model">destination.membership.report</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
                <field name="partner_id" />
                <field name="product_id" />
                <field name="members_lines" />
                <group name="memberships_group_by">
                    <filter name="destination" string="Entity" context="{'group_by': 'dest_id'}" />
                    <filter name="state" string="Status" context="{'group_by': 'state'}" />
                    <filter name="user_id" string="Salesperson" context="{'group_by': 'user_id'}" />
                    <filter name="product_id" string="Product" context="{'group_by': 'product_id'}" />
                    <filter name="product_categ_id" string="Product Category" context="{'group_by': 'product_categ_id'}" />
                    <filter name="product_group" string="Product Group" context="{'group_by': 'dest_product_group'}" />
                    <filter name="product_pricing" string="Pricing" context="{'group_by': 'dest_custom_price'}" />
                    <separator />
                    <filter string="Order Date" name="date" context="{'group_by':'date_order'}" />
                </group>
                <filter string="My Orders" name="my_orders" domain="[('user_id', '=', uid)]" />
                <filter string="Today" name="my_today" domain="['|',('start_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0))),('end_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59))),('end_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0))),('start_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59)))]" />
                <separator />
                <filter name="filter_new" string="Draft" domain="[['state','=','new']]" />
                <filter name="filter_active" string="Active" domain="[['state','=','active']]" />
                <filter name="filter_pending" string="Pending" domain="[['state','=','pending']]" />
                <filter name="filter_approved" string="Approved" domain="[['state','=','approved']]" />
                <filter name="filter_confirmed" string="Confirmed" domain="[['state','=','confirmed']]" />
                <filter name="filter_hold" string="On Hold" domain="[['state','=','hold']]" />
                <filter name="filter_late" string="Late" domain="[['state','=','late']]" />
                <filter name="filter_checkedout" string="Checked-Out" domain="[['state','=','checked-out']]" />
                <filter name="filter_done" string="Done" domain="[['state','=','done']]" />
                <filter name="filter_cancel" string="Cancelled" domain="[['state','=','cancel']]" />
                <separator />
                <filter string="Start Date" name="filter_start_date" date="dest_checkin_time" />
                <filter string="End Date" name="filter_end_date" date="dest_checkout_time" />
                <separator />
                <filter string="Rentals" name="accommodation" domain="[('dest_product_group', '=', 'accommodation')]" />
                <filter string="Memberships" name="membership" domain="[('dest_product_group', '=', 'membership')]" />
                <separator />
                <filter string="Variable Weekday Rate" name="weekday_rate" domain="[('dest_custom_price', '=', 'weekday_rate')]" />
                <filter string="Variable Daily Rate" name="daily_rate" domain="[('dest_custom_price', '=', 'daily_rate')]" />
                <filter string="Fixed Rate" name="fixed" domain="[('dest_custom_price', '=', 'fixed')]" />
                <searchpanel>
                    <field name="state" icon="fa-folder" enable_counters="1" />
                    <field name="product_categ_id" enable_counters="1" string="Product Category" />
                    <field name="dest_product_group" enable_counters="1" string="Product Group" />
                    <field name="dest_custom_price" enable_counters="1" string="Pricing" />
                </searchpanel>
            </search>
        </field>
    </record>

    <record id="destination_membership_graph_view" model="ir.ui.view">
        <field name="name">destination.membership.graph.view</field>
        <field name="model">destination.membership.report</field>
        <field name="arch" type="xml">

            <graph string="Rental Analysis" type="bar" sample="1" disable_linking="1">
                <field name="product_id" />
                <field name="state" />
                <field name="amount_total" type="measure" />

            </graph>


        </field>
    </record>

    <record id="destination_membership_pivot_view" model="ir.ui.view">
        <field name="name">destination.membership.pivot.view</field>
        <field name="model">destination.membership.report</field>
        <field name="arch" type="xml">

            <pivot string="Rental Analysis" sample="1">
                <field name="product_id" type="row" />
                <field name="amount_total" type="measure" />

            </pivot>

        </field>
    </record>


    <record id="destination_membership_dashboard_view" model="ir.ui.view">
        <field name="name">destination.membership.dashboard.view</field>
        <field name="model">destination.membership.report</field>
        <field name="arch" type="xml">
            <dashboard sample="1">
                <view type="graph" ref="destinations.destination_membership_graph_view" />
                <group>
                    <group>
                        <group>
                            <aggregate name="count" string="Count" field="membership_id" domain="[('state','in',['active','hold','checked-out','done','late'])]" />
                            <aggregate name="total" string="Total" field="amount_total" domain="[('state','in',['active','hold','checked-out','done','late'])]" />
                            <aggregate name="guest_total" string="Guest Total" field="guest_total_invoiced" domain="[('state','in',['active','hold','checked-out','done','late'])]" />
                            <aggregate name="member_total" string="Member Total" field="member_total_invoiced" domain="[('state','in',['active','hold','checked-out','done','late'])]" />
                            <formula name="grand_total" string="Total Sales" value="record.total + record.guest_total + record.member_total" widget="monetary"/>
                        </group>
                        <group>
                            <aggregate name="count_pipeline" string="Pipeline Count" field="membership_id" domain="[('state','=','confirmed')]" />
                            <aggregate name="total_pipeline" string="Pipeline Total" field="amount_total" domain="[('state','=','confirmed')]" />
                        </group>
                    </group>
                    <group col="1">
                        <widget name="pie_chart" title="Salesperson" attrs="{'groupby': 'user_id'}" modifiers="{&quot;groupby&quot;: &quot;user_id&quot;}" />
                    </group>
                </group>
                <view type="pivot" ref="destinations.destination_membership_pivot_view" />
            </dashboard>


        </field>
    </record>


    <record id="destination_membership_report_wizard_form_view" model="ir.ui.view">
        <field name="name">destination.membership.report.wizard.form.view</field>
        <field name="model">destination.membership.report.wizard</field>
        <field name="arch" type="xml">
            <form delete="false" duplicate="0">
                <sheet>
                    <group>
                        <label for="start_date" string="Date" />
                        <div class="o_row">
                            <field name="start_date" widget="daterange" nolabel="1" class="oe_inline" options="{'related_end_date': 'end_date'}" />
                            <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow" />
                            <field name="end_date" widget="daterange" nolabel="1" class="oe_inline" options="{'related_start_date': 'start_date'}" />
                        </div>

                    </group>
                    <footer>
                        <button name="generate_membership_report" string="Generate Report" type="object" class="btn-primary" data-hotkey="q" />
                        <button string="Cancel" class="btn-secondary" special="cancel" data-hotkey="z" />
                    </footer>
                </sheet>
            </form>
        </field>
    </record>
    
    <record id="destination_membership_line_report_search_view" model="ir.ui.view">
        <field name="name">destination.membership.line.report.search.view</field>
        <field name="model">destination.membership.line.report</field>
        <field name="arch" type="xml">
            <search>
                <field name="dest_id" />
                <field name="user_id" />
                <field name="product_id" />
                <field name="product_categ_id" />
                <field name="start_date" />
                <field name="partner_id" />
                <field name="membership_id" />
                
 
                <group name="memberships_group_by">
                    <filter name="destination" string="Entity" context="{'group_by': 'dest_id'}" />
                    <filter name="user_id" string="Salesperson" context="{'group_by': 'user_id'}" />
                    <filter name="product_id" string="Product" context="{'group_by': 'product_id'}" />
                    <filter name="product_categ_id" string="Product Category" context="{'group_by': 'product_categ_id'}" />
                    <filter name="product_group" string="Product Group" context="{'group_by': 'dest_product_group'}" />
                    <filter name="product_pricing" string="Pricing" context="{'group_by': 'dest_custom_price'}" />
                    <filter name="source" string="Source" context="{'group_by': 'source_type'}" />
                    <separator />
                    <filter name="membership" string="Rental" context="{'group_by': 'membership_id'}" />
                </group>
                <filter string="My Orders" name="my_orders" domain="[('user_id', '=', uid)]" />
                <separator />
                <filter string="Date" name="filter_start_date" date="start_date"/>
                <separator />
                <filter string="Rentals" name="membership" domain="[('source_type', '=', 'membership')]" />
                <filter string="Guest Access" name="guest" domain="[('source_type', '=', 'guest')]" />
                <filter string="Member Access" name="member" domain="[('source_type', '=', 'member')]" />
                <filter string="Others" name="other_sources" domain="[('source_type', '=', 'others')]" />
                <separator />
                <filter string="Units" name="units" domain="[('dest_product_group', '=', 'accommodation')]" />
                <filter string="Lockers/Memberships" name="lockers" domain="[('dest_product_group', '=', 'membership')]" />
                <filter string="Access" name="access" domain="[('dest_product_group', '=', 'access')]" />
                <filter string="Others" name="others" domain="[('dest_product_group', '=', 'others')]" />
                
            </search>
        </field>
    </record>
    
    <record id="destination_membership_line_report_wizard_form_view" model="ir.ui.view">
        <field name="name">destination.membership.line.report.wizard.form.view</field>
        <field name="model">destination.membership.line.report.wizard</field>
        <field name="arch" type="xml">
            <form delete="false" duplicate="0">
                <sheet>
                    <group>
                        <label for="start_date" string="Date" attrs="{'invisible': [['current_break', '!=', 0]]}" />
                        <div class="o_row"  attrs="{'invisible': [['current_break', '!=', 0]]}">
                            <field name="start_date" widget="daterange" nolabel="1" class="oe_inline" options="{'related_end_date': 'end_date'}" />
                            <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow" />
                            <field name="end_date" widget="daterange" nolabel="1" class="oe_inline" options="{'related_start_date': 'start_date'}" />
                        </div>
                        
                        <label for="initial_start_date" string="Date" attrs="{'invisible': [['current_break', '=', 0]]}" />
                        <div class="o_row"  attrs="{'invisible': [['current_break', '=', 0]]}">
                            <field name="initial_start_date" widget="daterange" nolabel="1" class="oe_inline" options="{'related_end_date': 'initial_end_date'}" readonly="1" force_save="1" />
                            <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow" />
                            <field name="initial_end_date" widget="daterange" nolabel="1" class="oe_inline" options="{'related_start_date': 'initial_start_date'}" readonly="1" force_save="1"/>
                        </div>
                        
                        <field name="no_of_breaks"  attrs="{'invisible': [['current_break', '!=', 0]]}"/>
                        <field name="initial_no_of_days" invisible="1"/>
                        <field name="initial_start_date" invisible="1"/>
                        <field name="initial_end_date" invisible="1"/>
                        <field name="current_break" readonly="1" force_save="1" attrs="{'invisible': ['|',['current_break', '=', 0],['show_report', '=', True]]}"/>
                        <field name="initial_no_of_breaks" readonly="1" force_save="1" attrs="{'invisible': ['|',['current_break', '=', 0],['show_report', '=', True]]}"/>
                        
                        <field name="show_report" invisible="1"/>
                    </group>
                    <footer>
                        <button name="generate_membership_line_report" string="Process Report" type="object" class="btn-primary" data-hotkey="q" attrs="{'invisible': [['show_report', '=', True]]}" />
                        <button name="view_report" string="View Report" type="object" class="btn-primary" data-hotkey="t" attrs="{'invisible': [['show_report', '=', False]]}"/>
                        <button string="Cancel" class="btn-secondary" special="cancel" data-hotkey="z" />
                    </footer>
                </sheet>
            </form>
        </field>
    </record>
    
    <record id="destination_membership_line_graph_view" model="ir.ui.view">
        <field name="name">destination.membership.line.graph.view</field>
        <field name="model">destination.membership.line.report</field>
        <field name="arch" type="xml">

            <graph string="Rental Analysis" type="bar" sample="1" disable_linking="1">
                <field name="start_date" interval="day"/>
                <field name="source_type" />
                <field name="amount" type="measure" />

            </graph>


        </field>
    </record>

                 
    <record id="destination_membership_line_pivot_view" model="ir.ui.view">
        <field name="name">destination.membership.line.pivot.view</field>
        <field name="model">destination.membership.line.report</field>
        <field name="arch" type="xml">
        
            <pivot string="Rental Analysis" sample="1" disable_linking="1">
                <field name="start_date" type="row" />
                <field name="source_type" type="col" />
                <field name="amount" type="measure" />
                <field name="days_available" string="Available" type="measure" />
                <field name="days_occupied" string="Occupied" type="measure" />
                
            </pivot>

        </field>
    </record>


    <record id="destination_membership_line_dashboard_view" model="ir.ui.view">
        <field name="name">destination.membership.line.dashboard.view</field>
        <field name="model">destination.membership.line.report</field>
        <field name="arch" type="xml">
            <dashboard sample="1">
                
                <view type="graph" ref="destinations.destination_membership_line_graph_view" />
                <group>
                    <group col="3">
                        <group>
                            <aggregate name="rental_count" string="Rentals" field="membership_id" group_operator="count" domain="[('source_type','=','membership')]"/>
                            <aggregate name="rental_total" string="Rentals Total" field="amount" domain="[('source_type','=','membership')]"/>
                            <aggregate name="rental_days_available" string="Available Days" field="days_available" domain="[('source_type','=','membership')]"/>
                            <aggregate name="rental_days_occupied" string="Occupied Days" field="days_occupied" domain="[('source_type','=','membership')]"/>
                        </group>
                        <group>
                            <formula name="rental_occupancy_rate" string="Occupancy Rate" value="record.rental_days_occupied / record.rental_days_available" widget="percentage" />
                            <formula name="rental_adr" string="ADR" help="Average Daily Rate" value="record.rental_total / record.rental_days_occupied" widget="monetary"/>
                            <formula name="rental_alor" string="ALOS (Days)" help="Average Length of Stay" value="record.rental_days_occupied / record.rental_count"/>
                            <formula name="rental_revpar" string="RevPAR" help="Revenue Per Available Room" value="record.rental_total / record.rental_days_available" widget="monetary"/>
                        </group>
                        <group>
                            <aggregate name="guest_count" string="Guest Access" field="days_occupied" domain="[('source_type','=','guest')]"/>
                            <aggregate name="guest_total" string="Guest Access Revenue" field="amount" domain="[('source_type','=','guest')]"/>
                            <formula name="average_guest" string="Average" value="record.guest_total / record.guest_count" widget="monetary"/>
                        </group>
                        <group>
                            <aggregate name="member_count" string="Member Access" field="days_occupied" domain="[('source_type','=','member')]"/>
                            <aggregate name="member_total" string="Member Access Revenue" field="amount" domain="[('source_type','=','member')]"/>
                            <formula name="average_member" string="Average" value="record.member_total / record.member_count" widget="monetary"/>
                        </group>
                        <group>
                            <aggregate name="other_total" string="Others Revenue" field="amount" domain="[('source_type','=','others')]"/>
                            <aggregate name="total_total" string="Total Revenue" field="amount"/>
                            <formula name="total_revpar" string="TRevPAR" help="Total Revenue Per Available Room" value="record.total_total / record.rental_days_available" widget="monetary"/>
                        </group>
                    </group>
                    <group col="1">
                        
                        <widget name="pie_chart" title="Salesperson" attrs="{'groupby': 'user_id', 'measure':'amount'}"/>
                            
                    </group>
                </group>
                <view type="pivot" ref="destinations.destination_membership_line_pivot_view" />
            </dashboard>


        </field>
    </record>

    
    
    
    
    
    
    
    <record id="destination_access_report_search_view" model="ir.ui.view">
        <field name="name">destination.access.report.search.view</field>
        <field name="model">destination.access.report</field>
        <field name="arch" type="xml">
            <search>
                <field name="partner_id" />
                <field name="product_id" />
                <group name="memberships_group_by">
                    <filter name="destination" string="Entity" context="{'group_by': 'dest_id'}" />
                    <filter name="product_id" string="Product" context="{'group_by': 'product_id'}" />
                    <filter name="product_categ_id" string="Product Category" context="{'group_by': 'product_categ_id'}" />
                    <filter name="source" string="Source" context="{'group_by': 'source_type'}" />
                    <separator />
                    <filter name="membership" string="Rental" context="{'group_by': 'membership_id'}" />
                </group>
                <filter string="Date" name="filter_start_date" date="date"/>
                <separator />
                <filter string="Rentals" name="membership" domain="[('source_type', '=', 'membership')]" />
                <filter string="Guest Access" name="guest" domain="[('source_type', '=', 'guest')]" />
                <filter string="Member Access" name="member" domain="[('source_type', '=', 'member')]" />
                
            </search>
        </field>
    </record>
    
    <record id="destination_access_report_wizard_form_view" model="ir.ui.view">
        <field name="name">destination.access.report.wizard.form.view</field>
        <field name="model">destination.access.report.wizard</field>
        <field name="arch" type="xml">
            <form delete="false" duplicate="0">
                <sheet>
                    <group>
                        <label for="start_date" string="Date" />
                        <div class="o_row">
                            <field name="start_date" widget="daterange" nolabel="1" class="oe_inline" options="{'related_end_date': 'end_date'}" />
                            <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow" />
                            <field name="end_date" widget="daterange" nolabel="1" class="oe_inline" options="{'related_start_date': 'start_date'}" />
                        </div>

                    </group>
                    <footer>
                        <button name="generate_access_report" string="Generate Report" type="object" class="btn-primary" data-hotkey="q" />
                        <button string="Cancel" class="btn-secondary" special="cancel" data-hotkey="z" />
                    </footer>
                </sheet>
            </form>
        </field>
    </record>
    
 

                 
    <record id="destination_access_pivot_view" model="ir.ui.view">
        <field name="name">destination.access.pivot.view</field>
        <field name="model">destination.access.report</field>
        <field name="arch" type="xml">
        
            <pivot string="Rental Analysis" sample="1" disable_linking="1" display_quantity="1">
                <field name="source_type" type="col" />
                <field name="name" type="row"/>
                <field name="access_payment_method_id" type="row"/>
                <field name="processin_user_id" type="row"/>
                <field name="amount" type="measure" />
                
            </pivot>

        </field>
    </record>




    <record id="destination_access_dashboard_view2" model="ir.ui.view">
        <field name="name">destination.access.dashboard.view</field>
        <field name="model">destination.access.report</field>
        <field name="arch" type="xml">
            <dashboard sample="1">
                
                <view type="graph" ref="destinations.destination_access_graph_view" />
                <group>
                    <group col="3">
                        
                        <group>
                            <aggregate name="guest_count" string="Guest Access" field="id" group_operator="count" domain="[('source_type','=','guest')]"/>
                            <aggregate name="guest_total" string="Guest Access Total" field="amount" domain="[('source_type','=','guest')]"/>
                            <formula name="average_guest" string="Average" value="record.guest_total / record.guest_count" widget="monetary"/>
                        </group>
                        <group>
                            <aggregate name="member_count" string="Member Access" field="id" group_operator="count" domain="[('source_type','=','member')]"/>
                            <aggregate name="member_total" string="Member Access Total" field="amount" domain="[('source_type','=','member')]"/>
                            <formula name="average_member" string="Average" value="record.member_total / record.member_count" widget="monetary"/>
                        </group>
                    </group>
                    <group col="1">
                        
                        <widget name="pie_chart" title="User" attrs="{'groupby': 'registration_user_id', 'measure':'amount'}"/>
                            
                    </group>
                </group>
                <view type="pivot" ref="destinations.destination_access_pivot_view" />
            </dashboard>


        </field>
    </record>
    
    <record id="destination_membership_member_kanban_view" model="ir.ui.view">
        <field name="name">destination.membership.member.kanban.view</field>
        <field name="model">destination.membership.member</field>
        <field name="arch" type="xml">
            <kanban records_draggable="0"  group_create="0" group_delete="0" group_edit="0" archivable="0" quick_create="0" create="0" edit="0" sample="1">
                <field name="id" />
                <field name="partner_id" />
                <field name="dest_id" />
                <field name="membership_id" />
                <field name="product_id" />
                <field name="membership_type" />

                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click oe_kanban_card">
                            <div class="o_kanban_record_top mb16">
                                <div class="o_kanban_record_headings mt4">
                                    <strong class="o_kanban_record_title">
                                        <span>
                                            <field name="member_name" on_change="1" modifiers="{&quot;readonly&quot;: true}" />
                                        </span>
                                    </strong>
                                </div>
                                
                            </div>
                            <div class="o_kanban_record_bottom">
                                <div class="oe_kanban_bottom_left text-muted">
                                    <span>
                                        <field name="dest_product" />
                                        <field name="member_access_status" invisible="1" />
                                        <field name="is_blacklist" invisible="1" />
                                        <field name="is_access_late" invisible="1" />
                                        <field name="access_permission" invisible="1" />
                                    </span>
                                </div>
                                <div class="oe_kanban_bottom_right">
                                    
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
    <record id="destination_res_partner_search_view" model="ir.ui.view">
        <field name="name">res.partner.search.view</field>
        <field name="model">res.partner</field>
        <field name="groups_id" eval="[
                                            (4, ref('destinations.destination_admin_group')),
                                            (4, ref('destinations.destination_accounting_group')),
                                            (4, ref('destinations.destination_sales_group')),
                                            (4, ref('destinations.destination_guest_process_group')),
                                            (4, ref('destinations.destination_guest_checking_group')),
                                            (4, ref('destinations.destination_guest_registration_group'))
                                            ]" />
        <field name="arch" type="xml">
            <search string="Search Partner">
                    <field name="name" filter_domain="['|', '|', ('display_name', 'ilike', self), ('ref', '=', self), ('email', 'ilike', self)]"/>
                        <field name="id_number" filter_domain="[('id_number', 'ilike', self)]"/>
                <field name="parent_id" domain="[('is_company', '=', True)]" operator="child_of"/>
                    <field name="email" filter_domain="[('email', 'ilike', self)]"/>
                    <field name="phone" filter_domain="['|', ('phone', 'ilike', self), ('mobile', 'ilike', self)]"/>
                    <field name="category_id" string="Tag" filter_domain="[('category_id', 'child_of', self)]"/>
                    <field name="user_id"/>
                    <field name="active_membership_ids" string="Active Memberships" filter_domain="[('active_membership_ids', 'ilike', self)]"/>
                    <separator/>
                    <filter string="Individuals" name="type_person" domain="[('is_company', '=', False)]"/>
                    <filter string="Companies" name="type_company" domain="[('is_company', '=', True)]"/>
                    <separator/>
                    <filter string="Archived" name="inactive" domain="[('active', '=', False)]"/>
                    <separator/>
                    <group expand="0" name="group_by" string="Group By">
                        <filter name="salesperson" string="Salesperson" domain="[]" context="{'group_by' : 'user_id'}"/>
                        <filter name="group_company" string="Company" context="{'group_by': 'parent_id'}"/>
                        <filter name="group_country" string="Country" context="{'group_by': 'country_id'}"/>
                    </group>
                </search>
        </field>
    </record>

    <record id="destination_customer_list_view" model="ir.ui.view">
        <field name="name">destination.customer.list.view</field>
        <field name="model">res.partner</field>
        <field name="groups_id" eval="[
                                            (4, ref('destinations.destination_admin_group')),
                                            (4, ref('destinations.destination_accounting_group')),
                                            (4, ref('destinations.destination_sales_group')),
                                            (4, ref('destinations.destination_guest_process_group')),
                                            (4, ref('destinations.destination_guest_checking_group')),
                                            (4, ref('destinations.destination_guest_registration_group'))
                                            ]" />
        <field name="arch" type="xml">
            <tree string="Contacts" sample="1" multi_edit="0">
                
               
            
                        <field name="name"/>
                       

                        <field name="partnergender" />
                        <field name="id_number" />
                        <field name="mobile"  />
                        <field name="email" optional="hide" />
                    <field name="phone" optional="hide" />
                        
                        <field name="active_membership_ids" widget="many2many_tags" options="{'color_field': 'color'}" optional="hide"/>
                
                </tree>
        </field>
    </record>
    
    <record id="destination_customer_form_view" model="ir.ui.view">
        <field name="name">destination.customer.form.view</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <form duplicate="0">
                
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        
                        <button name="action_view_memberships" type="object" class="oe_stat_button" icon="fa-key">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="active_membership_ids_count" style="color:green" modifiers="{&quot;readonly&quot;: true}" />/<field name="all_membership_ids_count" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Member</span>
                            </div>
                        </button>
                        <button name="action_view_invitation" type="object" class="oe_stat_button" icon="fa-user-plus">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="invitation_count" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Invitation</span>
                            </div>
                        </button>
                        <button name="action_view_member_activity" type="object" class="oe_stat_button" icon="fa-sign-in">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="member_activity_count" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Access</span>
                            </div>
                        </button>
                        <button name="action_view_guest" type="object" class="oe_stat_button" icon="fa-ticket">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value">
                                    <field name="guest_count" modifiers="{&quot;readonly&quot;: true}" />
                                </span>
                                <span class="o_stat_text">Guest Access</span>
                            </div>
                        </button>
                        
                        
                        
                        
                        


                    </div>
                    <field name="active" invisible="1"/>
                    <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [['active', '=', True]]}" />
                    <field name="image_1920" widget="image" class="oe_avatar" options="{&quot;preview_image&quot;: &quot;avatar_128&quot;}" on_change="1" modifiers="{}" />
                    <div class="oe_title mb24">

                        <h1>
                            <field id="individual" class="o_text_overflow" name="name" default_focus="1" placeholder="e.g. Brandom Freeman" required="1" />
                        </h1>

                    </div>
                    <group>

                        <field name="partnergender" widget="radio" />
                        <field name="id_number" />
                        <field name="mobile" widget="phone"  />
                        <field name="phone" widget="phone"  />
                        <field name="email" widget="email"  />
                        
                    </group>


                </sheet>
            </form>
        </field>
    </record>

    <record id="destination_membership_kanban_view" model="ir.ui.view">
        <field name="name">destination.membership.kanban.view</field>
        <field name="model">destination.membership</field>
        <field name="priority">0</field>
        <field name="arch" type="xml">
            <kanban records_draggable="0"  group_create="0" group_delete="0" group_edit="0" archivable="0" quick_create="0"  create="0" edit="0" delete="0" sample="1">
                <field name="id" />
                <field name="partner_id" />
                <field name="dest_id" />
                
                <field name="product_id" />
                

                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click oe_kanban_card">
                            <div class="o_kanban_record_top mb16">
                                <div class="o_kanban_record_headings mt4">
                                    <strong class="o_kanban_record_title">
                                        <span>
                                            <field name="partner_id" display="full" on_change="1" modifiers="{&quot;readonly&quot;: true}" />
                                        </span>
                                    </strong>
                                </div>
                                
                            </div>
                            <div class="o_kanban_record_bottom">
                                <div class="oe_kanban_bottom_left text-muted">
                                    <span>
                                        <field name="product_id_dest_code" />
                                        <br/>
                                        <field name="membership_code" />
                                        <br/>
                                        <field name="name"/>
                                        
                                    </span>
                                </div>
                                <div class="oe_kanban_bottom_right">
                                    
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
</odoo>
    